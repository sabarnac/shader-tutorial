{"version":3,"file":"component---src-pages-advanced-shadow-mapping-js-3dddd912118886b6738c.js","mappings":"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AAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,EAAE,EAAG,EAAG,GACR,EAAE,EAAG,EAAG,GACR,EAAE,EAAG,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,EAAE,EAAG,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,EAAE,EAAG,EAAG,GACR,EAAE,EAAG,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,EAAE,EAAG,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IAGIC,EAAe,CAC1B,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1E,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,IAAK,IAAK,EAAG,IAAK,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,GAAI,GAAI,IAAK,GACxE,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAC3E,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IA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AI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,IAAK,IAAK,EAAG,IAAK,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,GAAI,GAAI,IAAK,GACxE,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAC3E,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GACxE,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAC1E,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,GAAI,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,IAAK,IACvE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IACzE,IAA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ACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,EAAE,EAAG,EAAG,GACR,EAAE,EAAG,EAAG,GACR,EAAE,EAAG,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,EAAE,EAAG,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,EAAE,EAAG,EAAG,GACR,EAAE,EAAG,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,EAAE,EAAG,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IAGIC,GAAe,CAC1B,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1E,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,IAAK,IAAK,EAAG,IAAK,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,GAAI,GAAI,IAAK,GACxE,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAC3E,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GACxE,IAAK,IAAK,IAAK,IAAK,G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AAI,GACxE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxE,GAAI,GAAI,IAAK,IAAK,EAAG,IAAK,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,GAAI,GAAI,IAAK,GACxE,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAC3E,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GACxE,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAC1E,IAAK,GAAI,GAAI,IAAK,GAAI,IA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IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAC3E,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GACxE,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAC1E,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,GAAI,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,IAAK,IACvE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IACzE,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACtE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACtE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAC3E,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,I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,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAC1E,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAC3E,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GACxE,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAC1E,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,GAAI,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,IAAK,IACvE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IACzE,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACtE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACtE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAC3E,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,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","sources":["webpack://shader-tutorial/./src/components/advanced/shadow-mapping/area-light/map-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/area-light/map-example/vertex.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/area-light/map-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/area-light/model.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/area-light/map-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/area-light/shadow-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/area-light/shadow-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/area-light/shadow-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/area-light/shadow-example/vertex.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/map-example/vertex.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/map-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/map-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/model.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/map-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/map-fixed-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/map-fixed-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/map-fixed-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-example/vertex.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-fixed-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-fixed-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/peter-panning-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-acne-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-fixed-alt-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-fixed-alt-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-fixed-alt-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-fixed-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/model-fixed.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-model-fixed-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-model-fixed-zoomed-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-pcf-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-pcf-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-pcf-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/directional-light/shadow-pcf-zoomed-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/no-shadow/model.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/no-shadow/shadow-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/no-shadow/shadow-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/no-shadow/shadow-example/vertex.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/no-shadow/shadow-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/point-light/map-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/point-light/map-example/vertex.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/point-light/map-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/point-light/model.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/point-light/map-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/point-light/shadow-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/point-light/shadow-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/point-light/shadow-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/point-light/shadow-example/vertex.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/spot-light/map-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/spot-light/map-example/vertex.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/spot-light/map-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/spot-light/model.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/spot-light/map-example.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/spot-light/shadow-example-shaders.js","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/spot-light/shadow-example/vertex.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/spot-light/shadow-example/fragment.glsl","webpack://shader-tutorial/./src/components/advanced/shadow-mapping/spot-light/shadow-example.js","webpack://shader-tutorial/./src/pages/advanced/shadow-mapping.js"],"sourcesContent":["import fragmentShader from \"!raw-loader!./map-example/fragment.glsl\";\nimport vertexShader from \"!raw-loader!./map-example/vertex.glsl\";\n\nexport const areaLightMapVertexShaderSource = vertexShader;\nexport const areaLightMapFragmentShaderSource = fragmentShader;\n","export default \"attribute vec4 vertexPosition;\\n\\nuniform mat4 modelMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vertexPosition;\\n}\";","export default \"void main() {\\n  gl_FragColor = vec4(vec3(gl_FragCoord.z), 1.0);\\n}\";","export const modelVertices = [\n  [0, 2.5, -0.5],\n  [0.097545, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.097545, 0, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.191342, 0, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.277785, 0, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.353553, 0, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.415735, 0, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 0, -0.097545],\n  [0.46194, 0, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 0, 0],\n  [0.490393, 0, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 0, 0.097545],\n  [0.5, 0, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.490393, 0, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.46194, 0, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.415735, 0, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.353553, 0, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0.277785, 0, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 0, 0.490393],\n  [0.191342, 0, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 0, 0.5],\n  [0.097545, 0, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 0, 0.490393],\n  [0, 0, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 0, 0.097545],\n  [-0.46194, 0, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 0, 0],\n  [-0.490393, 0, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.5, 0, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-0.277785, 0, -0.415735],\n  [-0.46194, 2.5, -0.191342],\n  [-0.191342, 2.5, 0.46194],\n  [0.46194, 2.5, 0.191342],\n  [-0.191341, 2.5, -0.46194],\n  [-0.097544, 0, -0.490393],\n  [-0.191341, 0, -0.46194],\n  [-0.097544, 2.5, -0.490393],\n  [0, 0, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0.490393, 0, -0.097545],\n  [0.097545, 0, 0.490393],\n  [-0.490393, 0, 0.097545],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 2.5, -0.46194],\n  [0.191342, 2.5, -0.46194],\n  [0.097545, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 2.5, -0.490393],\n  [-0.191341, 2.5, -0.46194],\n  [-0.277785, 2.5, -0.415735],\n  [-0.353553, 2.5, -0.353554],\n  [-0.415734, 2.5, -0.277786],\n  [-0.490393, 2.5, -0.097546],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, 0.097545],\n  [-0.46194, 2.5, 0.191341],\n  [-0.415735, 2.5, 0.277785],\n  [-0.353554, 2.5, 0.353553],\n  [-0.277785, 2.5, 0.415735],\n  [-0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [0.097545, 2.5, 0.490393],\n  [0.191342, 2.5, 0.46194],\n  [0.277785, 2.5, 0.415735],\n  [0.353553, 2.5, 0.353553],\n  [0.415735, 2.5, 0.277785],\n  [0.490393, 2.5, 0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, -0.097545],\n  [0.46194, 2.5, -0.191342],\n  [0.415735, 2.5, -0.277785],\n  [0.353553, 2.5, -0.353553],\n  [0.277785, 2.5, -0.415735],\n  [-0.097544, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 0, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.5, 0, 0],\n  [0.490393, 0, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0, 0, 0.5],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.5, 0, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-2, -0.4, 2],\n  [-2, 0, -2],\n  [-2, -0.4, -2],\n  [-2, 0, 2],\n  [2, 0, -2],\n  [-2, 0, -2],\n  [2, 0, 2],\n  [2, -0.4, -2],\n  [2, 0, -2],\n  [2, -0.4, 2],\n  [-2, -0.4, -2],\n  [2, -0.4, -2],\n  [2, 0, -2],\n  [-2, -0.4, -2],\n  [-2, 0, -2],\n  [-2, 0, 2],\n  [2, -0.4, 2],\n  [2, 0, 2],\n  [-2, 0, 2],\n  [2, 0, 2],\n  [2, -0.4, 2],\n  [-2, -0.4, 2],\n  [2, -0.4, -2],\n  [-2, -0.4, 2],\n  [-2, 4, -2],\n  [-2, -0.4, -2.4],\n  [-2, 4, -2.4],\n  [2, -0.4, -2.4],\n  [-2, -0.4, -2.4],\n  [2, 4, -2.4],\n  [2, -0.4, -2.4],\n  [2, 4, -2],\n  [-2, -0.4, -2],\n  [2, -0.4, -2],\n  [2, -0.4, -2.4],\n  [-2, -0.4, -2.4],\n  [-2, 4, -2.4],\n  [2, 4, -2],\n  [2, 4, -2.4],\n  [-2, 4, -2.4],\n  [2, 4, -2.4],\n  [2, 4, -2],\n  [-2, 4, -2],\n  [-2, 4, -2],\n];\n\nexport const modelNormals = [\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 1, 0],\n];\n\nexport const modelIndices = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,\n  22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n  41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59,\n  60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78,\n  79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97,\n  98, 99, 100, 101, 0, 102, 1, 3, 103, 4, 6, 104, 7, 9, 105, 10, 12, 106, 13,\n  15, 107, 16, 18, 108, 19, 21, 109, 22, 24, 110, 25, 27, 111, 28, 30, 112, 31,\n  33, 113, 34, 36, 114, 37, 39, 115, 40, 42, 116, 43, 45, 117, 46, 48, 118, 49,\n  51, 119, 52, 54, 120, 55, 57, 121, 58, 60, 122, 61, 63, 123, 64, 66, 124, 67,\n  69, 125, 70, 72, 126, 73, 75, 127, 76, 78, 128, 79, 81, 129, 82, 84, 130, 85,\n  87, 131, 88, 132, 133, 134, 134, 135, 132, 135, 136, 132, 136, 137, 138, 138,\n  139, 90, 90, 140, 141, 141, 142, 90, 142, 143, 90, 143, 144, 91, 144, 145, 91,\n  145, 146, 91, 91, 147, 148, 148, 149, 150, 150, 151, 152, 152, 153, 92, 92,\n  154, 155, 155, 156, 92, 156, 157, 92, 157, 158, 159, 159, 160, 132, 136, 138,\n  132, 138, 90, 132, 91, 148, 92, 148, 150, 92, 150, 152, 92, 157, 159, 92, 159,\n  132, 92, 90, 143, 91, 132, 90, 92, 93, 161, 94, 96, 162, 97, 163, 164, 165,\n  165, 166, 167, 167, 168, 169, 169, 170, 167, 170, 99, 167, 99, 171, 172, 172,\n  173, 99, 173, 174, 99, 174, 175, 100, 175, 176, 100, 176, 177, 100, 100, 178,\n  179, 179, 180, 181, 181, 182, 183, 183, 184, 101, 101, 185, 186, 186, 187,\n  188, 188, 189, 163, 189, 190, 163, 190, 191, 163, 163, 165, 167, 100, 179,\n  101, 179, 181, 101, 181, 183, 101, 101, 186, 163, 186, 188, 163, 163, 167, 99,\n  99, 174, 100, 163, 99, 101, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201,\n  202, 203, 204, 205, 206, 207, 208, 209, 192, 210, 193, 195, 211, 196, 198,\n  212, 199, 201, 213, 202, 204, 214, 205, 207, 215, 208, 216, 217, 194, 218,\n  219, 220, 221, 199, 222, 223, 224, 225, 226, 202, 227, 228, 229, 230, 216,\n  231, 217, 218, 232, 219, 221, 233, 199, 223, 234, 224, 226, 203, 202, 228,\n  235, 229,\n];\n","import { mat4, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  areaLightMapFragmentShaderSource,\n  areaLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelVertices } from \"./model\";\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 1.0);\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingAreaLightMapExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    indices: modelIndices,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n  });\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          areaLightMapVertexShaderSource,\n          areaLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const { aspect, zNear, zFar } = webGlRef.canvasDimensions;\n          const depthProjectionMatrix = mat4.create();\n          mat4.ortho(\n            depthProjectionMatrix,\n            -4 * aspect,\n            4 * aspect,\n            -4,\n            4,\n            zNear,\n            zFar,\n          );\n\n          gl.clearColor(1.0, 1.0, 1.0, 1.0);\n          gl.clearDepth(1.0);\n          gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n          const lightViewMatrix = mat4.create();\n          mat4.lookAt(\n            lightViewMatrix,\n            lightModelPosition,\n            [0.0, 0.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          const scaledModelMatrix = mat4.create();\n          mat4.scale(scaledModelMatrix, modelMatrix, [1.45, 1.45, 1.45]);\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            depthProjectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            scaledModelMatrix,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n\n          requestAnimationFrame(renderScene);\n        });\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    Direction: ${coordArrToString(\n      lightDirectionInverted.map((coord) => -1 * coord),\n    )}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingAreaLightMapExample);\n","import fragmentShader from \"!raw-loader!./shadow-example/fragment.glsl\";\nimport vertexShader from \"!raw-loader!./shadow-example/vertex.glsl\";\n\nexport const areaLightShadowVertexShaderSource = vertexShader;\nexport const areaLightShadowFragmentShaderSource = fragmentShader;\n","export default \"varying highp vec4 fragmentPositionFromLight;\\n\\nvarying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nuniform highp vec2 texelSize;\\nuniform highp vec3 lightColor;\\nuniform highp float lightIntensity;\\nuniform highp vec4 lightDirection_worldSpace;\\nuniform highp vec4 lightPosition_worldSpace;\\nuniform highp float ambientFactor;\\nuniform sampler2D shadowMapTextureSampler;\\n\\nconst highp float acneBias = 0.005;\\n\\nhighp float getAverageVisibility(highp vec2 shadowMapCoords, highp float currentDepth) {\\n  highp float visibility = 0.0;\\n  for (int x = -2; x <= 2; x++) {\\n    for (int y = -2; y <= 2; y++) {\\n      highp float closestDepth = texture2D(shadowMapTextureSampler, shadowMapCoords.xy + (vec2(x, y) * texelSize)).z;\\n      visibility += currentDepth - acneBias > closestDepth ? 0.0 : 1.0;\\n    }\\n  }\\n  return visibility / 25.0;\\n}\\n\\nhighp float getDistanceFromLight() {\\n  highp vec3 lightPlaneNormal = normalize(lightDirection_worldSpace.xyz);\\n  highp float lightPlaneDistanceFromOrigin = (0.0 - (lightPlaneNormal.x * lightPosition_worldSpace.x)\\n                                                  - (lightPlaneNormal.y * lightPosition_worldSpace.y)\\n                                                  - (lightPlaneNormal.z * lightPosition_worldSpace.z)\\n                                             ) / length(lightPlaneNormal);\\n\\n  return abs(dot(lightPlaneNormal, fragmentPosition_worldSpace.xyz) + lightPlaneDistanceFromOrigin);\\n}\\n\\nhighp vec3 getDiffuseLighting() {\\n  highp vec3 lightColorIntensity = lightColor * lightIntensity;\\n  highp float diffuseStrength = clamp(dot(fragmentNormal_viewSpace, lightDirection_viewSpace), 0.0, 1.0);\\n\\n  highp float distanceFromLight = getDistanceFromLight();\\n  return (lightColorIntensity * diffuseStrength) / (distanceFromLight * distanceFromLight);\\n}\\n\\nvoid main() {\\n  highp vec4 surfaceColor = vec4(1.0);\\n  highp vec4 ambientColor = vec4(surfaceColor);\\n\\n  highp vec3 diffuseLight = getDiffuseLighting();\\n\\n  highp vec3 shadowMapCoords = (fragmentPositionFromLight.xyz / fragmentPositionFromLight.w) * 0.5 + 0.5;\\n\\n  highp float currentDepth = shadowMapCoords.z;\\n  highp float fragmentVisibility = getAverageVisibility(shadowMapCoords.xy, currentDepth);\\n\\n  gl_FragColor.rgb = (ambientColor.rgb * ambientFactor) + (fragmentVisibility * surfaceColor.rgb * diffuseLight);\\n  gl_FragColor.a = surfaceColor.a;\\n}\";","import { mat4, vec2, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  areaLightMapFragmentShaderSource,\n  areaLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model\";\nimport {\n  areaLightShadowFragmentShaderSource,\n  areaLightShadowVertexShaderSource,\n} from \"./shadow-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightDirection_worldSpace: \"vec4\",\n      lightPosition_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      texelSize: \"vec2\",\n      ambientFactor: \"float\",\n      shadowMapTextureSampler: \"sampler2D\",\n    },\n  },\n};\n\nconst lightDirection = vec4.create();\nvec4.normalize(lightDirection, vec4.fromValues(9.0, -27.0, 18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 0.0);\nconst lightColor = vec3.fromValues(0.5, 0.5, 0.5);\nconst lightIntensity = 1000.0;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingAreaLightShadowExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(null);\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          areaLightMapVertexShaderSource,\n          areaLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        webGlRef.createTextureTargetFramebuffer(\n          shadowMapSceneBuffer.shadowMapTexture,\n          shadowMapFramebuffer,\n          true,\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapFramebuffer !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          areaLightShadowVertexShaderSource,\n          areaLightShadowFragmentShaderSource,\n        ),\n      );\n    }),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const texelSize = vec2.fromValues(\n          1.0 / webGlRef.canvasDimensions.width,\n          1.0 / webGlRef.canvasDimensions.height,\n        );\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderToFramebuffer(shadowMapFramebuffer, () => {\n          webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n            if (!shouldRender) {\n              return;\n            }\n\n            const { aspect, zNear, zFar } = webGlRef.canvasDimensions;\n            mat4.ortho(\n              lightProjectionMatrix,\n              -4 * aspect,\n              4 * aspect,\n              -4,\n              4,\n              zNear,\n              zFar,\n            );\n\n            gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            gl.clearDepth(1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            mat4.lookAt(\n              lightViewMatrix,\n              lightModelPosition,\n              [0.0, 0.0, 0.0],\n              [0.0, 1.0, 0.0],\n            );\n\n            mat4.scale(lightModelMatrix, modelMatrix, [1.45, 1.45, 1.45]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n            gl.vertexAttribPointer(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              3,\n              gl.FLOAT,\n              false,\n              0,\n              0,\n            );\n            gl.enableVertexAttribArray(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n            );\n\n            gl.bindBuffer(\n              gl.ELEMENT_ARRAY_BUFFER,\n              shadowMapSceneBuffer.indices,\n            );\n\n            gl.useProgram(shadowMapShaderProgram);\n\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n              false,\n              lightProjectionMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n              false,\n              lightViewMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n              false,\n              lightModelMatrix,\n            );\n\n            gl.drawElements(\n              gl.TRIANGLES,\n              scene.indices.length,\n              gl.UNSIGNED_SHORT,\n              0,\n            );\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-9.0, 6.0, -0.5],\n            [0.0, 1.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightPosition_worldSpace,\n            lightModelPosition,\n          );\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightDirection_worldSpace,\n            lightDirection,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform2fv(\n            shaderInfo.fragment.uniformLocations.texelSize,\n            texelSize,\n          );\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, shadowMapSceneBuffer.shadowMapTexture);\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  const colorCoords = { x: \"r\", y: \"g\", z: \"b\" };\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n    Lighting:\n        Ambient Factor: ${scene.ambientFactor}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    Direction: ${coordArrToString(lightDirection)}\n    Color: ${coordArrToString(lightColor, colorCoords)}\n    Intensity: ${lightIntensity}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingAreaLightShadowExample);\n","export default \"attribute vec4 vertexPosition;\\nattribute vec3 vertexNormal;\\n\\nuniform mat4 modelMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nuniform mat4 lightModelMatrix;\\nuniform mat4 lightViewMatrix;\\nuniform mat4 lightProjectionMatrix;\\n\\nuniform vec4 lightDirection_worldSpace;\\nuniform vec4 lightPosition_worldSpace;\\nuniform vec3 lightColor;\\nuniform float lightIntensity;\\n\\nvarying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nvarying highp vec4 fragmentPositionFromLight;\\n\\nvoid main() {\\n  highp vec4 vertexPosition_worldSpace = modelMatrix * vertexPosition;\\n  highp vec4 vertexPosition_viewSpace = viewMatrix * vertexPosition_worldSpace;\\n  \\n  gl_Position = projectionMatrix * vertexPosition_viewSpace;\\n\\n  fragmentPosition_worldSpace = vertexPosition_worldSpace;\\n  fragmentPositionFromLight = lightProjectionMatrix * lightViewMatrix * lightModelMatrix * vertexPosition;\\n  \\n  fragmentNormal_viewSpace = (viewMatrix * modelMatrix * vec4(vertexNormal, 0.0)).xyz;\\n  lightDirection_viewSpace = (viewMatrix * (-1.0 * lightDirection_worldSpace)).xyz;\\n}\";","export default \"attribute vec4 vertexPosition;\\n\\nuniform mat4 modelMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vertexPosition;\\n}\";","import fragmentShader from \"!raw-loader!./map-example/fragment.glsl\";\nimport vertexShader from \"!raw-loader!./map-example/vertex.glsl\";\n\nexport const directionalLightMapVertexShaderSource = vertexShader;\nexport const directionalLightMapFragmentShaderSource = fragmentShader;\n","export default \"void main() {\\n  gl_FragColor = vec4(vec3(gl_FragCoord.z), 1.0);\\n}\";","export const modelVertices = [\n  [0, 2.5, -0.5],\n  [0.097545, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.097545, 0, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.191342, 0, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.277785, 0, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.353553, 0, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.415735, 0, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 0, -0.097545],\n  [0.46194, 0, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 0, 0],\n  [0.490393, 0, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 0, 0.097545],\n  [0.5, 0, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.490393, 0, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.46194, 0, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.415735, 0, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.353553, 0, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0.277785, 0, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 0, 0.490393],\n  [0.191342, 0, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 0, 0.5],\n  [0.097545, 0, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 0, 0.490393],\n  [0, 0, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 0, 0.097545],\n  [-0.46194, 0, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 0, 0],\n  [-0.490393, 0, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.5, 0, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-0.277785, 0, -0.415735],\n  [-0.46194, 2.5, -0.191342],\n  [-0.191342, 2.5, 0.46194],\n  [0.46194, 2.5, 0.191342],\n  [-0.191341, 2.5, -0.46194],\n  [-0.097544, 0, -0.490393],\n  [-0.191341, 0, -0.46194],\n  [-0.097544, 2.5, -0.490393],\n  [0, 0, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0.490393, 0, -0.097545],\n  [0.097545, 0, 0.490393],\n  [-0.490393, 0, 0.097545],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 2.5, -0.46194],\n  [0.191342, 2.5, -0.46194],\n  [0.097545, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 2.5, -0.490393],\n  [-0.191341, 2.5, -0.46194],\n  [-0.277785, 2.5, -0.415735],\n  [-0.353553, 2.5, -0.353554],\n  [-0.415734, 2.5, -0.277786],\n  [-0.490393, 2.5, -0.097546],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, 0.097545],\n  [-0.46194, 2.5, 0.191341],\n  [-0.415735, 2.5, 0.277785],\n  [-0.353554, 2.5, 0.353553],\n  [-0.277785, 2.5, 0.415735],\n  [-0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [0.097545, 2.5, 0.490393],\n  [0.191342, 2.5, 0.46194],\n  [0.277785, 2.5, 0.415735],\n  [0.353553, 2.5, 0.353553],\n  [0.415735, 2.5, 0.277785],\n  [0.490393, 2.5, 0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, -0.097545],\n  [0.46194, 2.5, -0.191342],\n  [0.415735, 2.5, -0.277785],\n  [0.353553, 2.5, -0.353553],\n  [0.277785, 2.5, -0.415735],\n  [-0.097544, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 0, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.5, 0, 0],\n  [0.490393, 0, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0, 0, 0.5],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.5, 0, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-2, -0.002, 2],\n  [-2, 0, -2],\n  [-2, -0.002, -2],\n  [-2, 0, 2],\n  [2, 0, -2],\n  [-2, 0, -2],\n  [2, 0, 2],\n  [2, -0.002, -2],\n  [2, 0, -2],\n  [2, -0.002, 2],\n  [-2, -0.002, -2],\n  [2, -0.002, -2],\n  [2, 0, -2],\n  [-2, -0.002, -2],\n  [-2, 0, -2],\n  [-2, 0, 2],\n  [2, -0.002, 2],\n  [2, 0, 2],\n  [-2, 0, 2],\n  [2, 0, 2],\n  [2, -0.002, 2],\n  [-2, -0.002, 2],\n  [2, -0.002, -2],\n  [-2, -0.002, 2],\n  [-2, 4, -2],\n  [-2, -0.002, -2.002],\n  [-2, 4, -2.002],\n  [2, -0.002, -2.002],\n  [-2, -0.002, -2.002],\n  [2, 4, -2.002],\n  [2, -0.002, -2.002],\n  [2, 4, -2],\n  [-2, -0.002, -2],\n  [2, -0.002, -2],\n  [2, -0.002, -2.002],\n  [-2, -0.002, -2.002],\n  [-2, 4, -2.002],\n  [2, 4, -2],\n  [2, 4, -2.002],\n  [-2, 4, -2.002],\n  [2, 4, -2.002],\n  [2, 4, -2],\n  [-2, 4, -2],\n  [-2, 4, -2],\n];\n\nexport const modelNormals = [\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 1, 0],\n];\n\nexport const modelIndices = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,\n  22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n  41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59,\n  60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78,\n  79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97,\n  98, 99, 100, 101, 0, 102, 1, 3, 103, 4, 6, 104, 7, 9, 105, 10, 12, 106, 13,\n  15, 107, 16, 18, 108, 19, 21, 109, 22, 24, 110, 25, 27, 111, 28, 30, 112, 31,\n  33, 113, 34, 36, 114, 37, 39, 115, 40, 42, 116, 43, 45, 117, 46, 48, 118, 49,\n  51, 119, 52, 54, 120, 55, 57, 121, 58, 60, 122, 61, 63, 123, 64, 66, 124, 67,\n  69, 125, 70, 72, 126, 73, 75, 127, 76, 78, 128, 79, 81, 129, 82, 84, 130, 85,\n  87, 131, 88, 132, 133, 134, 134, 135, 132, 135, 136, 132, 136, 137, 138, 138,\n  139, 90, 90, 140, 141, 141, 142, 90, 142, 143, 90, 143, 144, 91, 144, 145, 91,\n  145, 146, 91, 91, 147, 148, 148, 149, 150, 150, 151, 152, 152, 153, 92, 92,\n  154, 155, 155, 156, 92, 156, 157, 92, 157, 158, 159, 159, 160, 132, 136, 138,\n  132, 138, 90, 132, 91, 148, 92, 148, 150, 92, 150, 152, 92, 157, 159, 92, 159,\n  132, 92, 90, 143, 91, 132, 90, 92, 93, 161, 94, 96, 162, 97, 163, 164, 165,\n  165, 166, 167, 167, 168, 169, 169, 170, 167, 170, 99, 167, 99, 171, 172, 172,\n  173, 99, 173, 174, 99, 174, 175, 100, 175, 176, 100, 176, 177, 100, 100, 178,\n  179, 179, 180, 181, 181, 182, 183, 183, 184, 101, 101, 185, 186, 186, 187,\n  188, 188, 189, 163, 189, 190, 163, 190, 191, 163, 163, 165, 167, 100, 179,\n  101, 179, 181, 101, 181, 183, 101, 101, 186, 163, 186, 188, 163, 163, 167, 99,\n  99, 174, 100, 163, 99, 101, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201,\n  202, 203, 204, 205, 206, 207, 208, 209, 192, 210, 193, 195, 211, 196, 198,\n  212, 199, 201, 213, 202, 204, 214, 205, 207, 215, 208, 216, 217, 194, 218,\n  219, 220, 221, 199, 222, 223, 224, 225, 226, 202, 227, 228, 229, 230, 216,\n  231, 217, 218, 232, 219, 221, 233, 199, 223, 234, 224, 226, 203, 202, 228,\n  235, 229,\n];\n","import { mat4, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  directionalLightMapFragmentShaderSource,\n  directionalLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelVertices } from \"./model\";\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 1.0);\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingDirectionalLightMapExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    indices: modelIndices,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n  });\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightMapVertexShaderSource,\n          directionalLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const { aspect, zNear, zFar } = webGlRef.canvasDimensions;\n          const depthProjectionMatrix = mat4.create();\n          mat4.ortho(\n            depthProjectionMatrix,\n            -4 * aspect,\n            4 * aspect,\n            -4,\n            4,\n            zNear,\n            zFar,\n          );\n\n          gl.clearColor(1.0, 1.0, 1.0, 1.0);\n          gl.clearDepth(1.0);\n          gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n          const lightViewMatrix = mat4.create();\n          mat4.lookAt(\n            lightViewMatrix,\n            lightModelPosition,\n            [0.0, 0.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          const scaledModelMatrix = mat4.create();\n          mat4.scale(scaledModelMatrix, modelMatrix, [1.75, 1.75, 1.75]);\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            depthProjectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            scaledModelMatrix,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n\n          requestAnimationFrame(renderScene);\n        });\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    Direction: ${coordArrToString(\n      lightDirectionInverted.map((coord) => -1 * coord),\n    )}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingDirectionalLightMapExample);\n","import vertexShader from \"!raw-loader!./map-example/vertex.glsl\";\nimport fragmentShader from \"!raw-loader!./map-fixed-example/fragment.glsl\";\n\nexport const directionalLightMapFixedVertexShaderSource = vertexShader;\nexport const directionalLightMapFixedFragmentShaderSource = fragmentShader;\n","export default \"// Float to RGBA encoder from https://stackoverflow.com/questions/18453302/how-do-you-pack-one-32bit-int-into-4-8bit-ints-in-glsl-webgl\\n// which is based from https://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\\nhighp vec4 encodeFloatToRgba (highp float v) {\\n  // We need to store the 32-bit float as four 8-bit float chunks (which we store as a vec4).\\n\\n  // To do this, we first need to be able to shift the float number such that we can get each\\n  // 8-bit float chunk under each component.\\n\\n  // Since we don't have access to bit shift operators, we can instead use multiplication.\\n  // If we multiple a number by 0xff (255.0), we will have shifted that number 8 bits to the left.\\n\\n  // Using this, for each component of the vec4, we can bit shift the 8-bits we need from the original\\n  // float value, subtract any additional precision we don't need to store under that component,\\n  // and then store that as the final RGBA value.\\n\\n  // First we generate an encoding vector that will shift the float by the appropriate bits for each\\n  // vector component.\\n  const highp vec4 bitsToEncode = vec4(\\n    1.0,       // Shifting the number  0 [255.0 ^ 0] bits for this component.\\n    255.0,     // Shifting the number  8 [255.0 ^ 1] bits for this component.\\n    65025.0,   // Shifting the number 16 [255.0 ^ 2] bits for this component.\\n    16581375.0 // Shifting the number 24 [255.0 ^ 3] bits for this component.\\n  );\\n\\n  // We multiply the float against the encoder vector above to get the appropriate number of bit-shifts\\n  // for each component. But for each of them we don't care about the integer parts, just the fractional\\n  // parts, so we use the `fract` function to discard the integer parts from each component.\\n  highp vec4 enc = fract(bitsToEncode * v);\\n  \\n  // Now each component doesn't just contain the bits of data for their respective positions, but also\\n  // the bits of data for each component after it. This needs to be subtracted so that each component\\n  // only contains the 8-bits of information of for its own component, discarding that additional data away\\n  // We do this by getting the vector for each succeeding component, dividing it by 255 so that the result\\n  // value now equals how it is actually stored in the current component, and then just subtract that result\\n  // from the original value to get the final vec4 where each component contains just the 8-bit chunk that\\n  // it represents.\\n  enc -= enc.yzww * vec2(1.0 / 255.0, 0.0).xxxy;\\n  \\n  // Now we can return our final calculated RGBA vector.\\n  return enc;\\n}\\n\\nvoid main() {\\n  gl_FragColor = encodeFloatToRgba(gl_FragCoord.z);\\n}\";","import { mat4, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  directionalLightMapFixedFragmentShaderSource,\n  directionalLightMapFixedVertexShaderSource,\n} from \"./map-fixed-example-shaders\";\nimport { modelIndices, modelVertices } from \"./model\";\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 1.0);\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingDirectionalLightMapFixedExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    indices: modelIndices,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n  });\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightMapFixedVertexShaderSource,\n          directionalLightMapFixedFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          gl.enable(gl.CULL_FACE);\n          gl.cullFace(gl.FRONT);\n\n          const { aspect } = webGlRef.canvasDimensions;\n          const depthProjectionMatrix = mat4.create();\n          mat4.ortho(\n            depthProjectionMatrix,\n            -4 * aspect,\n            4 * aspect,\n            -4,\n            4,\n            25.0,\n            40.0,\n          );\n\n          gl.clearColor(1.0, 1.0, 1.0, 1.0);\n          gl.clearDepth(1.0);\n          gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n          const lightViewMatrix = mat4.create();\n          mat4.lookAt(\n            lightViewMatrix,\n            lightModelPosition,\n            [0.0, 0.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          const scaledModelMatrix = mat4.create();\n          mat4.scale(scaledModelMatrix, modelMatrix, [1.75, 1.75, 1.75]);\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            depthProjectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            scaledModelMatrix,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n\n          webGlRef._setupCullFace();\n\n          requestAnimationFrame(renderScene);\n        });\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    Direction: ${coordArrToString(\n      lightDirectionInverted.map((coord) => -1 * coord),\n    )}\n    Near Plane: 25.0\n    Far Plane: 40.0\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingDirectionalLightMapFixedExample);\n","export default \"attribute vec4 vertexPosition;\\nattribute vec3 vertexNormal;\\n\\nuniform mat4 modelMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nuniform mat4 lightModelMatrix;\\nuniform mat4 lightViewMatrix;\\nuniform mat4 lightProjectionMatrix;\\n\\nuniform vec4 lightDirection_worldSpace;\\nuniform vec3 lightColor;\\nuniform float lightIntensity;\\n\\nvarying highp vec4 fragmentPositionFromLight;\\n\\nvarying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nvoid main() {\\n  highp vec4 vertexPosition_worldSpace = modelMatrix * vertexPosition;\\n  highp vec4 vertexPosition_viewSpace = viewMatrix * vertexPosition_worldSpace;\\n  \\n  gl_Position = projectionMatrix * vertexPosition_viewSpace;\\n\\n  fragmentPosition_worldSpace = vertexPosition_worldSpace;\\n  fragmentPositionFromLight = lightProjectionMatrix * lightViewMatrix * lightModelMatrix * vertexPosition;\\n  \\n  fragmentNormal_viewSpace = (viewMatrix * modelMatrix * vec4(vertexNormal, 0.0)).xyz;\\n  lightDirection_viewSpace = (viewMatrix * lightDirection_worldSpace).xyz;\\n}\";","import vertexShader from \"!raw-loader!./shadow-example/vertex.glsl\";\nimport fragmentShader from \"!raw-loader!./shadow-fixed-example/fragment.glsl\";\n\nexport const directionalLightShadowFixedVertexShaderSource = vertexShader;\nexport const directionalLightShadowFixedFragmentShaderSource = fragmentShader;\n","export default \"varying highp vec4 fragmentPositionFromLight;\\n\\nvarying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nuniform highp vec3 lightColor;\\nuniform highp float lightIntensity;\\nuniform highp vec4 lightDirection_worldSpace;\\nuniform highp float ambientFactor;\\nuniform sampler2D shadowMapTextureSampler;\\n\\nhighp vec3 getDiffuseLighting() {\\n  highp vec3 lightColorIntensity = lightColor * lightIntensity;\\n  highp float diffuseStrength = clamp(dot(fragmentNormal_viewSpace, lightDirection_viewSpace), 0.0, 1.0);\\n  \\n  // highp float distanceFromLight = distance(fragmentPosition_worldSpace, lightPosition_worldSpace);\\n  return (lightColorIntensity * diffuseStrength) /* / (distanceFromLight * distanceFromLight) */;\\n}\\n\\nvoid main() {\\n  highp vec4 surfaceColor = vec4(1.0);\\n  highp vec4 ambientColor = vec4(surfaceColor);\\n\\n  highp vec3 diffuseLight = getDiffuseLighting();\\n\\n  highp vec3 shadowMapCoords = (fragmentPositionFromLight.xyz / fragmentPositionFromLight.w) * 0.5 + 0.5;\\n  highp float closestDepth = texture2D(shadowMapTextureSampler, shadowMapCoords.xy).z;\\n\\n  highp float acneBias = 0.00575;\\n  highp float currentDepth = shadowMapCoords.z;\\n  highp float fragmentVisibility = (currentDepth - acneBias) > closestDepth ? 0.0 : 1.0;\\n\\n  gl_FragColor.rgb = (ambientColor.rgb * ambientFactor) + (fragmentVisibility * surfaceColor.rgb * diffuseLight);\\n  gl_FragColor.a = surfaceColor.a;\\n}\";","import { mat4, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  directionalLightMapFragmentShaderSource,\n  directionalLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model\";\nimport {\n  directionalLightShadowFixedFragmentShaderSource,\n  directionalLightShadowFixedVertexShaderSource,\n} from \"./shadow-fixed-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightDirection_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      ambientFactor: \"float\",\n      shadowMapTextureSampler: \"sampler2D\",\n    },\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 0.0);\nconst lightColor = vec3.fromValues(1.0, 1.0, 1.0);\nconst lightIntensity = 0.75;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingFixedDirectionalLightPeterPanningExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(null);\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightMapVertexShaderSource,\n          directionalLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        webGlRef.createTextureTargetFramebuffer(\n          shadowMapSceneBuffer.shadowMapTexture,\n          shadowMapFramebuffer,\n          true,\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapFramebuffer !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightShadowFixedVertexShaderSource,\n          directionalLightShadowFixedFragmentShaderSource,\n        ),\n      );\n    }),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderToFramebuffer(shadowMapFramebuffer, () => {\n          webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n            if (!shouldRender) {\n              return;\n            }\n\n            const { aspect, zNear, zFar } = webGlRef.canvasDimensions;\n            mat4.ortho(\n              lightProjectionMatrix,\n              -4 * aspect,\n              4 * aspect,\n              -4,\n              4,\n              zNear,\n              zFar,\n            );\n\n            gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            gl.clearDepth(1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            mat4.lookAt(\n              lightViewMatrix,\n              lightModelPosition,\n              [0.0, 0.0, 0.0],\n              [0.0, 1.0, 0.0],\n            );\n\n            mat4.scale(lightModelMatrix, modelMatrix, [1.75, 1.75, 1.75]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n            gl.vertexAttribPointer(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              3,\n              gl.FLOAT,\n              false,\n              0,\n              0,\n            );\n            gl.enableVertexAttribArray(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n            );\n\n            gl.bindBuffer(\n              gl.ELEMENT_ARRAY_BUFFER,\n              shadowMapSceneBuffer.indices,\n            );\n\n            gl.useProgram(shadowMapShaderProgram);\n\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n              false,\n              lightProjectionMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n              false,\n              lightViewMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n              false,\n              lightModelMatrix,\n            );\n\n            gl.drawElements(\n              gl.TRIANGLES,\n              scene.indices.length,\n              gl.UNSIGNED_SHORT,\n              0,\n            );\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-4.0, 4.0, 0.5],\n            [0.5, 0.0, -2.5],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightDirection_worldSpace,\n            lightDirectionInverted,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, shadowMapSceneBuffer.shadowMapTexture);\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n    </div>\n  );\n};\n\nexport default wrapExample(\n  ShadowMappingFixedDirectionalLightPeterPanningExample,\n);\n","import fragmentShader from \"!raw-loader!./shadow-example/fragment.glsl\";\nimport vertexShader from \"!raw-loader!./shadow-example/vertex.glsl\";\n\nexport const directionalLightShadowVertexShaderSource = vertexShader;\nexport const directionalLightShadowFragmentShaderSource = fragmentShader;\n","export default \"varying highp vec4 fragmentPositionFromLight;\\n\\nvarying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nuniform highp vec3 lightColor;\\nuniform highp float lightIntensity;\\nuniform highp vec4 lightDirection_worldSpace;\\nuniform highp float ambientFactor;\\nuniform sampler2D shadowMapTextureSampler;\\n\\nhighp vec3 getDiffuseLighting() {\\n  highp vec3 lightColorIntensity = lightColor * lightIntensity;\\n  highp float diffuseStrength = clamp(dot(fragmentNormal_viewSpace, lightDirection_viewSpace), 0.0, 1.0);\\n  \\n  // Since we're rendering a directional light, the strength of the light doesn't drop with distance,\\n  // so leave out the distance calculation part.\\n  // highp float distanceFromLight = distance(fragmentPosition_worldSpace, lightPosition_worldSpace);\\n  // return (lightColorIntensity * diffuseStrength) / (distanceFromLight * distanceFromLight);\\n  return lightColorIntensity * diffuseStrength;\\n}\\n\\nvoid main() {\\n  highp vec4 surfaceColor = vec4(1.0);\\n  highp vec4 ambientColor = vec4(surfaceColor);\\n\\n  highp vec3 diffuseLight = getDiffuseLighting();\\n\\n  highp vec3 shadowMapCoords = (fragmentPositionFromLight.xyz / fragmentPositionFromLight.w) * 0.5 + 0.5;\\n  highp float closestDepth = texture2D(shadowMapTextureSampler, shadowMapCoords.xy).z;\\n\\n  highp float currentDepth = shadowMapCoords.z;\\n  highp float fragmentVisibility = currentDepth > closestDepth ? 0.0 : 1.0;\\n\\n  gl_FragColor.rgb = (ambientColor.rgb * ambientFactor) + (fragmentVisibility * surfaceColor.rgb * diffuseLight);\\n  gl_FragColor.a = surfaceColor.a;\\n}\";","import { mat4, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  directionalLightMapFragmentShaderSource,\n  directionalLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model\";\nimport {\n  directionalLightShadowFragmentShaderSource,\n  directionalLightShadowVertexShaderSource,\n} from \"./shadow-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightDirection_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      ambientFactor: \"float\",\n      shadowMapTextureSampler: \"sampler2D\",\n    },\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 0.0);\nconst lightColor = vec3.fromValues(1.0, 1.0, 1.0);\nconst lightIntensity = 0.75;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingDirectionalLightShadowAcneExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(null);\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightMapVertexShaderSource,\n          directionalLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        webGlRef.createTextureTargetFramebuffer(\n          shadowMapSceneBuffer.shadowMapTexture,\n          shadowMapFramebuffer,\n          true,\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapFramebuffer !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightShadowVertexShaderSource,\n          directionalLightShadowFragmentShaderSource,\n        ),\n      );\n    }),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderToFramebuffer(shadowMapFramebuffer, () => {\n          webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n            if (!shouldRender) {\n              return;\n            }\n\n            const { aspect, zNear, zFar } = webGlRef.canvasDimensions;\n            mat4.ortho(\n              lightProjectionMatrix,\n              -4 * aspect,\n              4 * aspect,\n              -4,\n              4,\n              zNear,\n              zFar,\n            );\n\n            gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            gl.clearDepth(1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            mat4.lookAt(\n              lightViewMatrix,\n              lightModelPosition,\n              [0.0, 0.0, 0.0],\n              [0.0, 1.0, 0.0],\n            );\n\n            mat4.scale(lightModelMatrix, modelMatrix, [1.75, 1.75, 1.75]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n            gl.vertexAttribPointer(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              3,\n              gl.FLOAT,\n              false,\n              0,\n              0,\n            );\n            gl.enableVertexAttribArray(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n            );\n\n            gl.bindBuffer(\n              gl.ELEMENT_ARRAY_BUFFER,\n              shadowMapSceneBuffer.indices,\n            );\n\n            gl.useProgram(shadowMapShaderProgram);\n\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n              false,\n              lightProjectionMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n              false,\n              lightViewMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n              false,\n              lightModelMatrix,\n            );\n\n            gl.drawElements(\n              gl.TRIANGLES,\n              scene.indices.length,\n              gl.UNSIGNED_SHORT,\n              0,\n            );\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-4.0, 4.0, -0.5],\n            [0.0, 0.0, 1.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightDirection_worldSpace,\n            lightDirectionInverted,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, shadowMapSceneBuffer.shadowMapTexture);\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingDirectionalLightShadowAcneExample);\n","import { mat4, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  directionalLightMapFragmentShaderSource,\n  directionalLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model\";\nimport {\n  directionalLightShadowFragmentShaderSource,\n  directionalLightShadowVertexShaderSource,\n} from \"./shadow-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightDirection_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      ambientFactor: \"float\",\n      shadowMapTextureSampler: \"sampler2D\",\n    },\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 0.0);\nconst lightColor = vec3.fromValues(1.0, 1.0, 1.0);\nconst lightIntensity = 0.75;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingDirectionalLightShadowExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(null);\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightMapVertexShaderSource,\n          directionalLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        webGlRef.createTextureTargetFramebuffer(\n          shadowMapSceneBuffer.shadowMapTexture,\n          shadowMapFramebuffer,\n          true,\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapFramebuffer !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightShadowVertexShaderSource,\n          directionalLightShadowFragmentShaderSource,\n        ),\n      );\n    }),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderToFramebuffer(shadowMapFramebuffer, () => {\n          webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n            if (!shouldRender) {\n              return;\n            }\n\n            const { aspect, zNear, zFar } = webGlRef.canvasDimensions;\n            mat4.ortho(\n              lightProjectionMatrix,\n              -4 * aspect,\n              4 * aspect,\n              -4,\n              4,\n              zNear,\n              zFar,\n            );\n\n            gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            gl.clearDepth(1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            mat4.lookAt(\n              lightViewMatrix,\n              lightModelPosition,\n              [0.0, 0.0, 0.0],\n              [0.0, 1.0, 0.0],\n            );\n\n            mat4.scale(lightModelMatrix, modelMatrix, [1.75, 1.75, 1.75]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n            gl.vertexAttribPointer(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              3,\n              gl.FLOAT,\n              false,\n              0,\n              0,\n            );\n            gl.enableVertexAttribArray(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n            );\n\n            gl.bindBuffer(\n              gl.ELEMENT_ARRAY_BUFFER,\n              shadowMapSceneBuffer.indices,\n            );\n\n            gl.useProgram(shadowMapShaderProgram);\n\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n              false,\n              lightProjectionMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n              false,\n              lightViewMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n              false,\n              lightModelMatrix,\n            );\n\n            gl.drawElements(\n              gl.TRIANGLES,\n              scene.indices.length,\n              gl.UNSIGNED_SHORT,\n              0,\n            );\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-9.0, 6.0, -0.5],\n            [0.0, 1.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightDirection_worldSpace,\n            lightDirectionInverted,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, shadowMapSceneBuffer.shadowMapTexture);\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  const colorCoords = { x: \"r\", y: \"g\", z: \"b\" };\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n    Lighting:\n        Ambient Factor: ${scene.ambientFactor}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    Direction: ${coordArrToString(\n      lightDirectionInverted.map((coord) => -1 * coord),\n    )}\n    Color: ${coordArrToString(lightColor, colorCoords)}\n    Intensity: ${lightIntensity}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingDirectionalLightShadowExample);\n","import vertexShader from \"!raw-loader!./shadow-example/vertex.glsl\";\nimport fragmentShader from \"!raw-loader!./shadow-fixed-alt-example/fragment.glsl\";\n\nexport const directionalLightShadowFixedAltVertexShaderSource = vertexShader;\nexport const directionalLightShadowFixedAltFragmentShaderSource =\n  fragmentShader;\n","export default \"varying highp vec4 fragmentPositionFromLight;\\n\\nvarying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nuniform highp vec3 lightColor;\\nuniform highp float lightIntensity;\\nuniform highp vec4 lightDirection_worldSpace;\\nuniform highp float ambientFactor;\\nuniform sampler2D shadowMapTextureSampler;\\n\\n// Float to RGBA encoder from https://stackoverflow.com/questions/18453302/how-do-you-pack-one-32bit-int-into-4-8bit-ints-in-glsl-webgl\\n// which is based from https://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\\nhighp float decodeFloatFromRgba(highp vec4 v) {\\n  // We need to convert our RGBA vec4 value back to the 32-bit float it represents.\\n\\n  // To do this, we just need to reverse the process we did originally. Since each component represents\\n  // an 8-bit chunk of the original float, we just need to shift each component the appropriate number of\\n  // bits and then just add them all up together to get the original float back.\\n\\n  // First we generate a decoding vector that will shift the float by the appropriate bits for each\\n  // vector component.\\n  const highp vec4 bitsToDecode = vec4(\\n    1.0 / 1.0,       // Shifting the number  0 [255.0 ^ 0] bits for this component.\\n    1.0 / 255.0,     // Shifting the number  8 [255.0 ^ 1] bits for this component.\\n    1.0 / 65025.0,   // Shifting the number 16 [255.0 ^ 2] bits for this component.\\n    1.0 / 16581375.0 // Shifting the number 24 [255.0 ^ 3] bits for this component.\\n  );\\n\\n  // Once done, we multiply this vector against the RGBA vector to shift each component the appropriate\\n  // number of places and add them all up together: (x1 * x2) + (y1 * y2) + (z1 * z2) + (w1 * w2).\\n  // Luckily we have a vector operation that does this called the dot product, so we can just use that\\n  // and return the result.\\n  return dot(v, bitsToDecode);\\n}\\n\\nhighp vec3 getDiffuseLighting() {\\n  highp vec3 lightColorIntensity = lightColor * lightIntensity;\\n  highp float diffuseStrength = clamp(dot(fragmentNormal_viewSpace, lightDirection_viewSpace), 0.0, 1.0);\\n  \\n  // highp float distanceFromLight = distance(fragmentPosition_worldSpace, lightPosition_worldSpace);\\n  return (lightColorIntensity * diffuseStrength) /* / (distanceFromLight * distanceFromLight) */;\\n}\\n\\nvoid main() {\\n  highp vec4 surfaceColor = vec4(1.0);\\n  highp vec4 ambientColor = vec4(surfaceColor);\\n\\n  highp vec3 diffuseLight = getDiffuseLighting();\\n\\n  highp vec3 shadowMapCoords = (fragmentPositionFromLight.xyz / fragmentPositionFromLight.w) * 0.5 + 0.5;\\n  highp float closestDepth = decodeFloatFromRgba(texture2D(shadowMapTextureSampler, shadowMapCoords.xy));\\n\\n  highp float currentDepth = shadowMapCoords.z;\\n  highp float fragmentVisibility = currentDepth > closestDepth ? 0.0 : 1.0;\\n\\n  gl_FragColor.rgb = (ambientColor.rgb * ambientFactor) + (fragmentVisibility * surfaceColor.rgb * diffuseLight);\\n  gl_FragColor.a = surfaceColor.a;\\n}\";","import { mat4, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  directionalLightMapFixedFragmentShaderSource,\n  directionalLightMapFixedVertexShaderSource,\n} from \"./map-fixed-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model\";\nimport {\n  directionalLightShadowFixedAltFragmentShaderSource,\n  directionalLightShadowFixedAltVertexShaderSource,\n} from \"./shadow-fixed-alt-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightDirection_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      ambientFactor: \"float\",\n      shadowMapTextureSampler: \"sampler2D\",\n    },\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 0.0);\nconst lightColor = vec3.fromValues(1.0, 1.0, 1.0);\nconst lightIntensity = 0.75;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingFixedAltDirectionalLightShadowExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(null);\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightMapFixedVertexShaderSource,\n          directionalLightMapFixedFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        webGlRef.createTextureTargetFramebuffer(\n          shadowMapSceneBuffer.shadowMapTexture,\n          shadowMapFramebuffer,\n          true,\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapFramebuffer !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightShadowFixedAltVertexShaderSource,\n          directionalLightShadowFixedAltFragmentShaderSource,\n        ),\n      );\n    }),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderToFramebuffer(shadowMapFramebuffer, () => {\n          webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n            if (!shouldRender) {\n              return;\n            }\n\n            gl.enable(gl.CULL_FACE);\n            gl.cullFace(gl.FRONT);\n\n            const { aspect } = webGlRef.canvasDimensions;\n            mat4.ortho(\n              lightProjectionMatrix,\n              -4 * aspect,\n              4 * aspect,\n              -4,\n              4,\n              25.0,\n              40.0,\n            );\n\n            gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            gl.clearDepth(1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            mat4.lookAt(\n              lightViewMatrix,\n              lightModelPosition,\n              [0.0, 0.0, 0.0],\n              [0.0, 1.0, 0.0],\n            );\n\n            mat4.scale(lightModelMatrix, modelMatrix, [1.75, 1.75, 1.75]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n            gl.vertexAttribPointer(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              3,\n              gl.FLOAT,\n              false,\n              0,\n              0,\n            );\n            gl.enableVertexAttribArray(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n            );\n\n            gl.bindBuffer(\n              gl.ELEMENT_ARRAY_BUFFER,\n              shadowMapSceneBuffer.indices,\n            );\n\n            gl.useProgram(shadowMapShaderProgram);\n\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n              false,\n              lightProjectionMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n              false,\n              lightViewMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n              false,\n              lightModelMatrix,\n            );\n\n            gl.drawElements(\n              gl.TRIANGLES,\n              scene.indices.length,\n              gl.UNSIGNED_SHORT,\n              0,\n            );\n\n            webGlRef._setupCullFace();\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-9.0, 6.0, -0.5],\n            [0.0, 1.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightDirection_worldSpace,\n            lightDirectionInverted,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, shadowMapSceneBuffer.shadowMapTexture);\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  const colorCoords = { x: \"r\", y: \"g\", z: \"b\" };\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n    Lighting:\n        Ambient Factor: ${scene.ambientFactor}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    Direction: ${coordArrToString(\n      lightDirectionInverted.map((coord) => -1 * coord),\n    )}\n    Color: ${coordArrToString(lightColor, colorCoords)}\n    Intensity: ${lightIntensity}\n    Near Plane: 25.0\n    Far Plane: 40.0\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingFixedAltDirectionalLightShadowExample);\n","import { mat4, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  directionalLightMapFragmentShaderSource,\n  directionalLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model\";\nimport {\n  directionalLightShadowFixedFragmentShaderSource,\n  directionalLightShadowFixedVertexShaderSource,\n} from \"./shadow-fixed-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightDirection_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      ambientFactor: \"float\",\n      shadowMapTextureSampler: \"sampler2D\",\n    },\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 0.0);\nconst lightColor = vec3.fromValues(1.0, 1.0, 1.0);\nconst lightIntensity = 0.75;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingFixedDirectionalLightShadowExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(null);\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightMapVertexShaderSource,\n          directionalLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        webGlRef.createTextureTargetFramebuffer(\n          shadowMapSceneBuffer.shadowMapTexture,\n          shadowMapFramebuffer,\n          true,\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapFramebuffer !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightShadowFixedVertexShaderSource,\n          directionalLightShadowFixedFragmentShaderSource,\n        ),\n      );\n    }),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderToFramebuffer(shadowMapFramebuffer, () => {\n          webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n            if (!shouldRender) {\n              return;\n            }\n\n            const { aspect, zNear, zFar } = webGlRef.canvasDimensions;\n            mat4.ortho(\n              lightProjectionMatrix,\n              -4 * aspect,\n              4 * aspect,\n              -4,\n              4,\n              zNear,\n              zFar,\n            );\n\n            gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            gl.clearDepth(1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            mat4.lookAt(\n              lightViewMatrix,\n              lightModelPosition,\n              [0.0, 0.0, 0.0],\n              [0.0, 1.0, 0.0],\n            );\n\n            mat4.scale(lightModelMatrix, modelMatrix, [1.75, 1.75, 1.75]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n            gl.vertexAttribPointer(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              3,\n              gl.FLOAT,\n              false,\n              0,\n              0,\n            );\n            gl.enableVertexAttribArray(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n            );\n\n            gl.bindBuffer(\n              gl.ELEMENT_ARRAY_BUFFER,\n              shadowMapSceneBuffer.indices,\n            );\n\n            gl.useProgram(shadowMapShaderProgram);\n\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n              false,\n              lightProjectionMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n              false,\n              lightViewMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n              false,\n              lightModelMatrix,\n            );\n\n            gl.drawElements(\n              gl.TRIANGLES,\n              scene.indices.length,\n              gl.UNSIGNED_SHORT,\n              0,\n            );\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-9.0, 6.0, -0.5],\n            [0.0, 1.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightDirection_worldSpace,\n            lightDirectionInverted,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, shadowMapSceneBuffer.shadowMapTexture);\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  const colorCoords = { x: \"r\", y: \"g\", z: \"b\" };\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n    Lighting:\n        Ambient Factor: ${scene.ambientFactor}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    Direction: ${coordArrToString(\n      lightDirectionInverted.map((coord) => -1 * coord),\n    )}\n    Color: ${coordArrToString(lightColor, colorCoords)}\n    Intensity: ${lightIntensity}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingFixedDirectionalLightShadowExample);\n","export const modelVertices = [\n  [0, 2.5, -0.5],\n  [0.097545, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.097545, 0, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.191342, 0, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.277785, 0, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.353553, 0, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.415735, 0, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 0, -0.097545],\n  [0.46194, 0, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 0, 0],\n  [0.490393, 0, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 0, 0.097545],\n  [0.5, 0, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.490393, 0, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.46194, 0, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.415735, 0, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.353553, 0, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0.277785, 0, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 0, 0.490393],\n  [0.191342, 0, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 0, 0.5],\n  [0.097545, 0, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 0, 0.490393],\n  [0, 0, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 0, 0.097545],\n  [-0.46194, 0, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 0, 0],\n  [-0.490393, 0, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.5, 0, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-0.277785, 0, -0.415735],\n  [-0.46194, 2.5, -0.191342],\n  [-0.191342, 2.5, 0.46194],\n  [0.46194, 2.5, 0.191342],\n  [-0.191341, 2.5, -0.46194],\n  [-0.097544, 0, -0.490393],\n  [-0.191341, 0, -0.46194],\n  [-0.097544, 2.5, -0.490393],\n  [0, 0, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0.490393, 0, -0.097545],\n  [0.097545, 0, 0.490393],\n  [-0.490393, 0, 0.097545],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 2.5, -0.46194],\n  [0.191342, 2.5, -0.46194],\n  [0.097545, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 2.5, -0.490393],\n  [-0.191341, 2.5, -0.46194],\n  [-0.277785, 2.5, -0.415735],\n  [-0.353553, 2.5, -0.353554],\n  [-0.415734, 2.5, -0.277786],\n  [-0.490393, 2.5, -0.097546],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, 0.097545],\n  [-0.46194, 2.5, 0.191341],\n  [-0.415735, 2.5, 0.277785],\n  [-0.353554, 2.5, 0.353553],\n  [-0.277785, 2.5, 0.415735],\n  [-0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [0.097545, 2.5, 0.490393],\n  [0.191342, 2.5, 0.46194],\n  [0.277785, 2.5, 0.415735],\n  [0.353553, 2.5, 0.353553],\n  [0.415735, 2.5, 0.277785],\n  [0.490393, 2.5, 0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, -0.097545],\n  [0.46194, 2.5, -0.191342],\n  [0.415735, 2.5, -0.277785],\n  [0.353553, 2.5, -0.353553],\n  [0.277785, 2.5, -0.415735],\n  [-0.097544, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 0, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.5, 0, 0],\n  [0.490393, 0, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0, 0, 0.5],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.5, 0, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-2, -0.4, 2],\n  [-2, 0, -2],\n  [-2, -0.4, -2],\n  [-2, 0, 2],\n  [2, 0, -2],\n  [-2, 0, -2],\n  [2, 0, 2],\n  [2, -0.4, -2],\n  [2, 0, -2],\n  [2, -0.4, 2],\n  [-2, -0.4, -2],\n  [2, -0.4, -2],\n  [2, 0, -2],\n  [-2, -0.4, -2],\n  [-2, 0, -2],\n  [-2, 0, 2],\n  [2, -0.4, 2],\n  [2, 0, 2],\n  [-2, 0, 2],\n  [2, 0, 2],\n  [2, -0.4, 2],\n  [-2, -0.4, 2],\n  [2, -0.4, -2],\n  [-2, -0.4, 2],\n  [-2, 4, -2],\n  [-2, -0.4, -2.4],\n  [-2, 4, -2.4],\n  [2, -0.4, -2.4],\n  [-2, -0.4, -2.4],\n  [2, 4, -2.4],\n  [2, -0.4, -2.4],\n  [2, 4, -2],\n  [-2, -0.4, -2],\n  [2, -0.4, -2],\n  [2, -0.4, -2.4],\n  [-2, -0.4, -2.4],\n  [-2, 4, -2.4],\n  [2, 4, -2],\n  [2, 4, -2.4],\n  [-2, 4, -2.4],\n  [2, 4, -2.4],\n  [2, 4, -2],\n  [-2, 4, -2],\n  [-2, 4, -2],\n];\n\nexport const modelNormals = [\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 1, 0],\n];\n\nexport const modelIndices = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,\n  22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n  41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59,\n  60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78,\n  79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97,\n  98, 99, 100, 101, 0, 102, 1, 3, 103, 4, 6, 104, 7, 9, 105, 10, 12, 106, 13,\n  15, 107, 16, 18, 108, 19, 21, 109, 22, 24, 110, 25, 27, 111, 28, 30, 112, 31,\n  33, 113, 34, 36, 114, 37, 39, 115, 40, 42, 116, 43, 45, 117, 46, 48, 118, 49,\n  51, 119, 52, 54, 120, 55, 57, 121, 58, 60, 122, 61, 63, 123, 64, 66, 124, 67,\n  69, 125, 70, 72, 126, 73, 75, 127, 76, 78, 128, 79, 81, 129, 82, 84, 130, 85,\n  87, 131, 88, 132, 133, 134, 134, 135, 132, 135, 136, 132, 136, 137, 138, 138,\n  139, 90, 90, 140, 141, 141, 142, 90, 142, 143, 90, 143, 144, 91, 144, 145, 91,\n  145, 146, 91, 91, 147, 148, 148, 149, 150, 150, 151, 152, 152, 153, 92, 92,\n  154, 155, 155, 156, 92, 156, 157, 92, 157, 158, 159, 159, 160, 132, 136, 138,\n  132, 138, 90, 132, 91, 148, 92, 148, 150, 92, 150, 152, 92, 157, 159, 92, 159,\n  132, 92, 90, 143, 91, 132, 90, 92, 93, 161, 94, 96, 162, 97, 163, 164, 165,\n  165, 166, 167, 167, 168, 169, 169, 170, 167, 170, 99, 167, 99, 171, 172, 172,\n  173, 99, 173, 174, 99, 174, 175, 100, 175, 176, 100, 176, 177, 100, 100, 178,\n  179, 179, 180, 181, 181, 182, 183, 183, 184, 101, 101, 185, 186, 186, 187,\n  188, 188, 189, 163, 189, 190, 163, 190, 191, 163, 163, 165, 167, 100, 179,\n  101, 179, 181, 101, 181, 183, 101, 101, 186, 163, 186, 188, 163, 163, 167, 99,\n  99, 174, 100, 163, 99, 101, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201,\n  202, 203, 204, 205, 206, 207, 208, 209, 192, 210, 193, 195, 211, 196, 198,\n  212, 199, 201, 213, 202, 204, 214, 205, 207, 215, 208, 216, 217, 194, 218,\n  219, 220, 221, 199, 222, 223, 224, 225, 226, 202, 227, 228, 229, 230, 216,\n  231, 217, 218, 232, 219, 221, 233, 199, 223, 234, 224, 226, 203, 202, 228,\n  235, 229,\n];\n","import { mat4, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  directionalLightMapFragmentShaderSource,\n  directionalLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model-fixed\";\nimport {\n  directionalLightShadowFixedFragmentShaderSource,\n  directionalLightShadowFixedVertexShaderSource,\n} from \"./shadow-fixed-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightDirection_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      ambientFactor: \"float\",\n      shadowMapTextureSampler: \"sampler2D\",\n    },\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 0.0);\nconst lightColor = vec3.fromValues(1.0, 1.0, 1.0);\nconst lightIntensity = 0.75;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingFixedModelDirectionalLightShadowExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(null);\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightMapVertexShaderSource,\n          directionalLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        webGlRef.createTextureTargetFramebuffer(\n          shadowMapSceneBuffer.shadowMapTexture,\n          shadowMapFramebuffer,\n          true,\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapFramebuffer !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightShadowFixedVertexShaderSource,\n          directionalLightShadowFixedFragmentShaderSource,\n        ),\n      );\n    }),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderToFramebuffer(shadowMapFramebuffer, () => {\n          webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n            if (!shouldRender) {\n              return;\n            }\n\n            const { aspect } = webGlRef.canvasDimensions;\n            mat4.ortho(\n              lightProjectionMatrix,\n              -4 * aspect,\n              4 * aspect,\n              -4,\n              4,\n              25.0,\n              40.0,\n            );\n\n            gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            gl.clearDepth(1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            mat4.lookAt(\n              lightViewMatrix,\n              lightModelPosition,\n              [0.0, 0.0, 0.0],\n              [0.0, 1.0, 0.0],\n            );\n\n            mat4.scale(lightModelMatrix, modelMatrix, [1.45, 1.45, 1.45]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n            gl.vertexAttribPointer(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              3,\n              gl.FLOAT,\n              false,\n              0,\n              0,\n            );\n            gl.enableVertexAttribArray(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n            );\n\n            gl.bindBuffer(\n              gl.ELEMENT_ARRAY_BUFFER,\n              shadowMapSceneBuffer.indices,\n            );\n\n            gl.useProgram(shadowMapShaderProgram);\n\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n              false,\n              lightProjectionMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n              false,\n              lightViewMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n              false,\n              lightModelMatrix,\n            );\n\n            gl.drawElements(\n              gl.TRIANGLES,\n              scene.indices.length,\n              gl.UNSIGNED_SHORT,\n              0,\n            );\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-9.0, 6.0, -0.5],\n            [0.0, 1.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightDirection_worldSpace,\n            lightDirectionInverted,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, shadowMapSceneBuffer.shadowMapTexture);\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  const colorCoords = { x: \"r\", y: \"g\", z: \"b\" };\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n    Lighting:\n        Ambient Factor: ${scene.ambientFactor}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    Direction: ${coordArrToString(\n      lightDirectionInverted.map((coord) => -1 * coord),\n    )}\n    Color: ${coordArrToString(lightColor, colorCoords)}\n    Intensity: ${lightIntensity}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(\n  ShadowMappingFixedModelDirectionalLightShadowExample,\n);\n","import { mat4, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  directionalLightMapFragmentShaderSource,\n  directionalLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model-fixed\";\nimport {\n  directionalLightShadowFixedFragmentShaderSource,\n  directionalLightShadowFixedVertexShaderSource,\n} from \"./shadow-fixed-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightDirection_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      ambientFactor: \"float\",\n      shadowMapTextureSampler: \"sampler2D\",\n    },\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 0.0);\nconst lightColor = vec3.fromValues(1.0, 1.0, 1.0);\nconst lightIntensity = 0.75;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingFixedModelDirectionalLightZoomedShadowExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(null);\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightMapVertexShaderSource,\n          directionalLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        webGlRef.createTextureTargetFramebuffer(\n          shadowMapSceneBuffer.shadowMapTexture,\n          shadowMapFramebuffer,\n          true,\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapFramebuffer !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightShadowFixedVertexShaderSource,\n          directionalLightShadowFixedFragmentShaderSource,\n        ),\n      );\n    }),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderToFramebuffer(shadowMapFramebuffer, () => {\n          webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n            if (!shouldRender) {\n              return;\n            }\n\n            const { aspect } = webGlRef.canvasDimensions;\n            mat4.ortho(\n              lightProjectionMatrix,\n              -4 * aspect,\n              4 * aspect,\n              -4,\n              4,\n              25.0,\n              40.0,\n            );\n\n            gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            gl.clearDepth(1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            mat4.lookAt(\n              lightViewMatrix,\n              lightModelPosition,\n              [0.0, 0.0, 0.0],\n              [0.0, 1.0, 0.0],\n            );\n\n            mat4.scale(lightModelMatrix, modelMatrix, [1.45, 1.45, 1.45]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n            gl.vertexAttribPointer(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              3,\n              gl.FLOAT,\n              false,\n              0,\n              0,\n            );\n            gl.enableVertexAttribArray(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n            );\n\n            gl.bindBuffer(\n              gl.ELEMENT_ARRAY_BUFFER,\n              shadowMapSceneBuffer.indices,\n            );\n\n            gl.useProgram(shadowMapShaderProgram);\n\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n              false,\n              lightProjectionMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n              false,\n              lightViewMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n              false,\n              lightModelMatrix,\n            );\n\n            gl.drawElements(\n              gl.TRIANGLES,\n              scene.indices.length,\n              gl.UNSIGNED_SHORT,\n              0,\n            );\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-1.125, 1.0, -0.0625],\n            [0.0, 1.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightDirection_worldSpace,\n            lightDirectionInverted,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, shadowMapSceneBuffer.shadowMapTexture);\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  const colorCoords = { x: \"r\", y: \"g\", z: \"b\" };\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n    Lighting:\n        Ambient Factor: ${scene.ambientFactor}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    Direction: ${coordArrToString(\n      lightDirectionInverted.map((coord) => -1 * coord),\n    )}\n    Color: ${coordArrToString(lightColor, colorCoords)}\n    Intensity: ${lightIntensity}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(\n  ShadowMappingFixedModelDirectionalLightZoomedShadowExample,\n);\n","import vertexShader from \"!raw-loader!./shadow-example/vertex.glsl\";\nimport fragmentShader from \"!raw-loader!./shadow-pcf-example/fragment.glsl\";\n\nexport const directionalLightShadowPcfVertexShaderSource = vertexShader;\nexport const directionalLightShadowPcfFragmentShaderSource = fragmentShader;\n","export default \"varying highp vec4 fragmentPositionFromLight;\\n\\nvarying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nuniform highp vec2 texelSize;\\nuniform highp vec3 lightColor;\\nuniform highp float lightIntensity;\\nuniform highp vec4 lightDirection_worldSpace;\\nuniform highp float ambientFactor;\\nuniform sampler2D shadowMapTextureSampler;\\n\\nconst highp float acneBias = 0.0175;\\n\\nhighp float getAverageVisibility(highp vec2 shadowMapCoords, highp float currentDepth) {\\n  highp float visibility = 0.0;\\n  for (int x = -2; x <= 2; x++) {\\n    for (int y = -2; y <= 2; y++) {\\n      highp float closestDepth = texture2D(shadowMapTextureSampler, shadowMapCoords.xy + (vec2(x, y) * texelSize)).z;\\n      visibility += currentDepth - acneBias > closestDepth ? 0.0 : 1.0;\\n    }\\n  }\\n  return visibility / 25.0;\\n}\\n\\nhighp vec3 getDiffuseLighting() {\\n  highp vec3 lightColorIntensity = lightColor * lightIntensity;\\n  highp float diffuseStrength = clamp(dot(fragmentNormal_viewSpace, lightDirection_viewSpace), 0.0, 1.0);\\n  \\n  // highp float distanceFromLight = distance(fragmentPosition_worldSpace, lightPosition_worldSpace);\\n  return (lightColorIntensity * diffuseStrength) /* / (distanceFromLight * distanceFromLight) */;\\n}\\n\\nvoid main() {\\n  highp vec4 surfaceColor = vec4(1.0);\\n  highp vec4 ambientColor = vec4(surfaceColor);\\n\\n  highp vec3 diffuseLight = getDiffuseLighting();\\n\\n  highp vec3 shadowMapCoords = (fragmentPositionFromLight.xyz / fragmentPositionFromLight.w) * 0.5 + 0.5;\\n\\n  highp float currentDepth = shadowMapCoords.z;\\n  highp float fragmentVisibility = getAverageVisibility(shadowMapCoords.xy, currentDepth);\\n\\n  gl_FragColor.rgb = (ambientColor.rgb * ambientFactor) + (fragmentVisibility * surfaceColor.rgb * diffuseLight);\\n  gl_FragColor.a = surfaceColor.a;\\n}\";","import { mat4, vec2, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  directionalLightMapFragmentShaderSource,\n  directionalLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model-fixed\";\nimport {\n  directionalLightShadowPcfFragmentShaderSource,\n  directionalLightShadowPcfVertexShaderSource,\n} from \"./shadow-pcf-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightDirection_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      texelSize: \"vec2\",\n      ambientFactor: \"float\",\n      shadowMapTextureSampler: \"sampler2D\",\n    },\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 0.0);\nconst lightColor = vec3.fromValues(1.0, 1.0, 1.0);\nconst lightIntensity = 0.75;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingDirectionalLightPcfShadowExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(null);\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightMapVertexShaderSource,\n          directionalLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        webGlRef.createTextureTargetFramebuffer(\n          shadowMapSceneBuffer.shadowMapTexture,\n          shadowMapFramebuffer,\n          true,\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapFramebuffer !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightShadowPcfVertexShaderSource,\n          directionalLightShadowPcfFragmentShaderSource,\n        ),\n      );\n    }),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const texelSize = vec2.fromValues(\n          1.0 / webGlRef.canvasDimensions.width,\n          1.0 / webGlRef.canvasDimensions.height,\n        );\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderToFramebuffer(shadowMapFramebuffer, () => {\n          webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n            if (!shouldRender) {\n              return;\n            }\n\n            const { aspect } = webGlRef.canvasDimensions;\n            mat4.ortho(\n              lightProjectionMatrix,\n              -4 * aspect,\n              4 * aspect,\n              -4,\n              4,\n              25.0,\n              40.0,\n            );\n\n            gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            gl.clearDepth(1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            mat4.lookAt(\n              lightViewMatrix,\n              lightModelPosition,\n              [0.0, 0.0, 0.0],\n              [0.0, 1.0, 0.0],\n            );\n\n            mat4.scale(lightModelMatrix, modelMatrix, [1.45, 1.45, 1.45]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n            gl.vertexAttribPointer(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              3,\n              gl.FLOAT,\n              false,\n              0,\n              0,\n            );\n            gl.enableVertexAttribArray(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n            );\n\n            gl.bindBuffer(\n              gl.ELEMENT_ARRAY_BUFFER,\n              shadowMapSceneBuffer.indices,\n            );\n\n            gl.useProgram(shadowMapShaderProgram);\n\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n              false,\n              lightProjectionMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n              false,\n              lightViewMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n              false,\n              lightModelMatrix,\n            );\n\n            gl.drawElements(\n              gl.TRIANGLES,\n              scene.indices.length,\n              gl.UNSIGNED_SHORT,\n              0,\n            );\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-9.0, 6.0, -0.5],\n            [0.0, 1.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightDirection_worldSpace,\n            lightDirectionInverted,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform2fv(\n            shaderInfo.fragment.uniformLocations.texelSize,\n            texelSize,\n          );\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, shadowMapSceneBuffer.shadowMapTexture);\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  const colorCoords = { x: \"r\", y: \"g\", z: \"b\" };\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n    Lighting:\n        Ambient Factor: ${scene.ambientFactor}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    Direction: ${coordArrToString(\n      lightDirectionInverted.map((coord) => -1 * coord),\n    )}\n    Color: ${coordArrToString(lightColor, colorCoords)}\n    Intensity: ${lightIntensity}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingDirectionalLightPcfShadowExample);\n","import { mat4, vec2, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  directionalLightMapFragmentShaderSource,\n  directionalLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model-fixed\";\nimport {\n  directionalLightShadowPcfFragmentShaderSource,\n  directionalLightShadowPcfVertexShaderSource,\n} from \"./shadow-pcf-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightDirection_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      texelSize: \"vec2\",\n      ambientFactor: \"float\",\n      shadowMapTextureSampler: \"sampler2D\",\n    },\n  },\n};\n\nconst lightDirectionInverted = vec4.create();\nvec4.normalize(lightDirectionInverted, vec4.fromValues(-9.0, 27.0, -18.0, 0.0));\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 0.0);\nconst lightColor = vec3.fromValues(1.0, 1.0, 1.0);\nconst lightIntensity = 0.75;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingDirectionalLightPcfZoomedShadowExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(null);\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightMapVertexShaderSource,\n          directionalLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        webGlRef.createTextureTargetFramebuffer(\n          shadowMapSceneBuffer.shadowMapTexture,\n          shadowMapFramebuffer,\n          true,\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapFramebuffer !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          directionalLightShadowPcfVertexShaderSource,\n          directionalLightShadowPcfFragmentShaderSource,\n        ),\n      );\n    }),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const texelSize = vec2.fromValues(\n          1.0 / webGlRef.canvasDimensions.width,\n          1.0 / webGlRef.canvasDimensions.height,\n        );\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderToFramebuffer(shadowMapFramebuffer, () => {\n          webGlRef.renderSceneOrtho(({ gl, modelMatrix }) => {\n            if (!shouldRender) {\n              return;\n            }\n\n            const { aspect } = webGlRef.canvasDimensions;\n            mat4.ortho(\n              lightProjectionMatrix,\n              -4 * aspect,\n              4 * aspect,\n              -4,\n              4,\n              25.0,\n              40.0,\n            );\n\n            gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            gl.clearDepth(1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            mat4.lookAt(\n              lightViewMatrix,\n              lightModelPosition,\n              [0.0, 0.0, 0.0],\n              [0.0, 1.0, 0.0],\n            );\n\n            mat4.scale(lightModelMatrix, modelMatrix, [1.45, 1.45, 1.45]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n            gl.vertexAttribPointer(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              3,\n              gl.FLOAT,\n              false,\n              0,\n              0,\n            );\n            gl.enableVertexAttribArray(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n            );\n\n            gl.bindBuffer(\n              gl.ELEMENT_ARRAY_BUFFER,\n              shadowMapSceneBuffer.indices,\n            );\n\n            gl.useProgram(shadowMapShaderProgram);\n\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n              false,\n              lightProjectionMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n              false,\n              lightViewMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n              false,\n              lightModelMatrix,\n            );\n\n            gl.drawElements(\n              gl.TRIANGLES,\n              scene.indices.length,\n              gl.UNSIGNED_SHORT,\n              0,\n            );\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-1.125, 1.0, -0.0625],\n            [0.0, 1.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightDirection_worldSpace,\n            lightDirectionInverted,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform2fv(\n            shaderInfo.fragment.uniformLocations.texelSize,\n            texelSize,\n          );\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, shadowMapSceneBuffer.shadowMapTexture);\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  const colorCoords = { x: \"r\", y: \"g\", z: \"b\" };\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n    Lighting:\n        Ambient Factor: ${scene.ambientFactor}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    Direction: ${coordArrToString(\n      lightDirectionInverted.map((coord) => -1 * coord),\n    )}\n    Color: ${coordArrToString(lightColor, colorCoords)}\n    Intensity: ${lightIntensity}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingDirectionalLightPcfZoomedShadowExample);\n","export const modelVertices = [\n  [0, 2.5, -0.5],\n  [0.097545, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.097545, 0, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.191342, 0, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.277785, 0, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.353553, 0, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.415735, 0, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 0, -0.097545],\n  [0.46194, 0, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 0, 0],\n  [0.490393, 0, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 0, 0.097545],\n  [0.5, 0, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.490393, 0, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.46194, 0, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.415735, 0, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.353553, 0, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0.277785, 0, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 0, 0.490393],\n  [0.191342, 0, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 0, 0.5],\n  [0.097545, 0, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 0, 0.490393],\n  [0, 0, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 0, 0.097545],\n  [-0.46194, 0, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 0, 0],\n  [-0.490393, 0, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.5, 0, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-0.277785, 0, -0.415735],\n  [-0.46194, 2.5, -0.191342],\n  [-0.191342, 2.5, 0.46194],\n  [0.46194, 2.5, 0.191342],\n  [-0.191341, 2.5, -0.46194],\n  [-0.097544, 0, -0.490393],\n  [-0.191341, 0, -0.46194],\n  [-0.097544, 2.5, -0.490393],\n  [0, 0, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0.490393, 0, -0.097545],\n  [0.097545, 0, 0.490393],\n  [-0.490393, 0, 0.097545],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 2.5, -0.46194],\n  [0.191342, 2.5, -0.46194],\n  [0.097545, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 2.5, -0.490393],\n  [-0.191341, 2.5, -0.46194],\n  [-0.277785, 2.5, -0.415735],\n  [-0.353553, 2.5, -0.353554],\n  [-0.415734, 2.5, -0.277786],\n  [-0.490393, 2.5, -0.097546],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, 0.097545],\n  [-0.46194, 2.5, 0.191341],\n  [-0.415735, 2.5, 0.277785],\n  [-0.353554, 2.5, 0.353553],\n  [-0.277785, 2.5, 0.415735],\n  [-0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [0.097545, 2.5, 0.490393],\n  [0.191342, 2.5, 0.46194],\n  [0.277785, 2.5, 0.415735],\n  [0.353553, 2.5, 0.353553],\n  [0.415735, 2.5, 0.277785],\n  [0.490393, 2.5, 0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, -0.097545],\n  [0.46194, 2.5, -0.191342],\n  [0.415735, 2.5, -0.277785],\n  [0.353553, 2.5, -0.353553],\n  [0.277785, 2.5, -0.415735],\n  [-0.097544, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 0, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.5, 0, 0],\n  [0.490393, 0, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0, 0, 0.5],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.5, 0, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-2, -0.002, 2],\n  [-2, 0, -2],\n  [-2, -0.002, -2],\n  [-2, 0, 2],\n  [2, 0, -2],\n  [-2, 0, -2],\n  [2, 0, 2],\n  [2, -0.002, -2],\n  [2, 0, -2],\n  [2, -0.002, 2],\n  [-2, -0.002, -2],\n  [2, -0.002, -2],\n  [2, 0, -2],\n  [-2, -0.002, -2],\n  [-2, 0, -2],\n  [-2, 0, 2],\n  [2, -0.002, 2],\n  [2, 0, 2],\n  [-2, 0, 2],\n  [2, 0, 2],\n  [2, -0.002, 2],\n  [-2, -0.002, 2],\n  [2, -0.002, -2],\n  [-2, -0.002, 2],\n  [-2, 4, -2],\n  [-2, -0.002, -2.002],\n  [-2, 4, -2.002],\n  [2, -0.002, -2.002],\n  [-2, -0.002, -2.002],\n  [2, 4, -2.002],\n  [2, -0.002, -2.002],\n  [2, 4, -2],\n  [-2, -0.002, -2],\n  [2, -0.002, -2],\n  [2, -0.002, -2.002],\n  [-2, -0.002, -2.002],\n  [-2, 4, -2.002],\n  [2, 4, -2],\n  [2, 4, -2.002],\n  [-2, 4, -2.002],\n  [2, 4, -2.002],\n  [2, 4, -2],\n  [-2, 4, -2],\n  [-2, 4, -2],\n];\n\nexport const modelNormals = [\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 1, 0],\n];\n\nexport const modelIndices = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,\n  22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n  41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59,\n  60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78,\n  79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97,\n  98, 99, 100, 101, 0, 102, 1, 3, 103, 4, 6, 104, 7, 9, 105, 10, 12, 106, 13,\n  15, 107, 16, 18, 108, 19, 21, 109, 22, 24, 110, 25, 27, 111, 28, 30, 112, 31,\n  33, 113, 34, 36, 114, 37, 39, 115, 40, 42, 116, 43, 45, 117, 46, 48, 118, 49,\n  51, 119, 52, 54, 120, 55, 57, 121, 58, 60, 122, 61, 63, 123, 64, 66, 124, 67,\n  69, 125, 70, 72, 126, 73, 75, 127, 76, 78, 128, 79, 81, 129, 82, 84, 130, 85,\n  87, 131, 88, 132, 133, 134, 134, 135, 132, 135, 136, 132, 136, 137, 138, 138,\n  139, 90, 90, 140, 141, 141, 142, 90, 142, 143, 90, 143, 144, 91, 144, 145, 91,\n  145, 146, 91, 91, 147, 148, 148, 149, 150, 150, 151, 152, 152, 153, 92, 92,\n  154, 155, 155, 156, 92, 156, 157, 92, 157, 158, 159, 159, 160, 132, 136, 138,\n  132, 138, 90, 132, 91, 148, 92, 148, 150, 92, 150, 152, 92, 157, 159, 92, 159,\n  132, 92, 90, 143, 91, 132, 90, 92, 93, 161, 94, 96, 162, 97, 163, 164, 165,\n  165, 166, 167, 167, 168, 169, 169, 170, 167, 170, 99, 167, 99, 171, 172, 172,\n  173, 99, 173, 174, 99, 174, 175, 100, 175, 176, 100, 176, 177, 100, 100, 178,\n  179, 179, 180, 181, 181, 182, 183, 183, 184, 101, 101, 185, 186, 186, 187,\n  188, 188, 189, 163, 189, 190, 163, 190, 191, 163, 163, 165, 167, 100, 179,\n  101, 179, 181, 101, 181, 183, 101, 101, 186, 163, 186, 188, 163, 163, 167, 99,\n  99, 174, 100, 163, 99, 101, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201,\n  202, 203, 204, 205, 206, 207, 208, 209, 192, 210, 193, 195, 211, 196, 198,\n  212, 199, 201, 213, 202, 204, 214, 205, 207, 215, 208, 216, 217, 194, 218,\n  219, 220, 221, 199, 222, 223, 224, 225, 226, 202, 227, 228, 229, 230, 216,\n  231, 217, 218, 232, 219, 221, 233, 199, 223, 234, 224, 226, 203, 202, 228,\n  235, 229,\n];\n","import fragmentShader from \"!raw-loader!./shadow-example/fragment.glsl\";\nimport vertexShader from \"!raw-loader!./shadow-example/vertex.glsl\";\n\nexport const noShadowVertexShaderSource = vertexShader;\nexport const noShadowFragmentShaderSource = fragmentShader;\n","import { mat4, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model\";\nimport {\n  noShadowFragmentShaderSource,\n  noShadowVertexShaderSource,\n} from \"./shadow-example-shaders\";\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightPosition_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      ambientFactor: \"float\",\n    },\n  },\n};\n\nconst lightModelPosition = vec4.fromValues(-9.0, 27.0, -18.0, 1.0);\nconst lightColor = vec3.fromValues(0.3, 0.3, 0.3);\nconst lightIntensity = 2500.0;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingNoShadowExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          noShadowVertexShaderSource,\n          noShadowFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-9.0, 6.0, -0.5],\n            [0.0, 1.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightPosition_worldSpace,\n            lightModelPosition,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  const colorCoords = { x: \"r\", y: \"g\", z: \"b\" };\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n    Lighting:\n        Ambient Factor: ${scene.ambientFactor}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    World Position: ${coordArrToString(lightModelPosition)}\n    Color: ${coordArrToString(lightColor, colorCoords)}\n    Intensity: ${lightIntensity}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingNoShadowExample);\n","export default \"attribute vec4 vertexPosition;\\nattribute vec3 vertexNormal;\\n\\nuniform mat4 modelMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nuniform mat4 lightModelMatrix;\\nuniform mat4 lightViewMatrix;\\nuniform mat4 lightProjectionMatrix;\\n\\nuniform vec4 lightPosition_worldSpace;\\nuniform vec3 lightColor;\\nuniform float lightIntensity;\\n\\nvarying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nvoid main() {\\n  highp vec4 vertexPosition_worldSpace = modelMatrix * vertexPosition;\\n  highp vec4 vertexPosition_viewSpace = viewMatrix * vertexPosition_worldSpace;\\n  \\n  gl_Position = projectionMatrix * vertexPosition_viewSpace;\\n  \\n  fragmentPosition_worldSpace = vertexPosition_worldSpace;\\n  highp vec4 lightPosition_viewSpace = viewMatrix * lightPosition_worldSpace;\\n  fragmentNormal_viewSpace = (viewMatrix * modelMatrix * vec4(vertexNormal, 0.0)).xyz;\\n  lightDirection_viewSpace = normalize((lightPosition_viewSpace - vertexPosition_viewSpace).xyz);\\n}\";","export default \"varying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nuniform highp vec3 lightColor;\\nuniform highp float lightIntensity;\\nuniform highp vec4 lightPosition_worldSpace;\\nuniform highp float ambientFactor;\\n\\nhighp vec3 getDiffuseLighting() {\\n  highp vec3 lightColorIntensity = lightColor * lightIntensity;\\n  highp float distanceFromLight = distance(fragmentPosition_worldSpace, lightPosition_worldSpace);\\n\\n  highp float diffuseStrength = clamp(dot(fragmentNormal_viewSpace, lightDirection_viewSpace), 0.0, 1.0);\\n  return (lightColorIntensity * diffuseStrength) / (distanceFromLight * distanceFromLight);\\n}\\n\\nvoid main() {\\n  highp vec4 surfaceColor = vec4(1.0);\\n  highp vec4 ambientColor = vec4(surfaceColor);\\n\\n  highp vec3 diffuseLight = getDiffuseLighting();\\n\\n  gl_FragColor.rgb = (ambientColor.rgb * ambientFactor) + (surfaceColor.rgb * diffuseLight);\\n  gl_FragColor.a = surfaceColor.a;\\n}\";","import fragmentShader from \"!raw-loader!./map-example/fragment.glsl\";\nimport vertexShader from \"!raw-loader!./map-example/vertex.glsl\";\n\nexport const pointLightMapVertexShaderSource = vertexShader;\nexport const pointLightMapFragmentShaderSource = fragmentShader;\n","export default \"attribute vec4 vertexPosition;\\n\\nuniform mat4 modelMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nvarying highp vec3 fragmentPosition_worldSpace;\\n\\nvoid main() {\\n  highp vec3 vertexPosition_worldSpace = (modelMatrix * vertexPosition).xyz;\\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vertexPosition;\\n\\n  fragmentPosition_worldSpace = vertexPosition_worldSpace;\\n}\";","export default \"varying highp vec3 fragmentPosition_worldSpace;\\n\\nuniform highp vec4 lightPosition_worldSpace;\\nuniform highp float farPlane;\\n\\nvoid main() {\\n  gl_FragColor = vec4(vec3(distance(fragmentPosition_worldSpace, lightPosition_worldSpace.xyz) / farPlane), 1.0);\\n}\";","export const modelVertices = [\n  [0, 2.5, -0.5],\n  [0.097545, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.097545, 0, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.191342, 0, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.277785, 0, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.353553, 0, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.415735, 0, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 0, -0.097545],\n  [0.46194, 0, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 0, 0],\n  [0.490393, 0, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 0, 0.097545],\n  [0.5, 0, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.490393, 0, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.46194, 0, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.415735, 0, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.353553, 0, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0.277785, 0, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 0, 0.490393],\n  [0.191342, 0, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 0, 0.5],\n  [0.097545, 0, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 0, 0.490393],\n  [0, 0, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 0, 0.097545],\n  [-0.46194, 0, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 0, 0],\n  [-0.490393, 0, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.5, 0, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-0.277785, 0, -0.415735],\n  [-0.46194, 2.5, -0.191342],\n  [-0.191342, 2.5, 0.46194],\n  [0.46194, 2.5, 0.191342],\n  [-0.191341, 2.5, -0.46194],\n  [-0.097544, 0, -0.490393],\n  [-0.191341, 0, -0.46194],\n  [-0.097544, 2.5, -0.490393],\n  [0, 0, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0.490393, 0, -0.097545],\n  [0.097545, 0, 0.490393],\n  [-0.490393, 0, 0.097545],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 2.5, -0.46194],\n  [0.191342, 2.5, -0.46194],\n  [0.097545, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 2.5, -0.490393],\n  [-0.191341, 2.5, -0.46194],\n  [-0.277785, 2.5, -0.415735],\n  [-0.353553, 2.5, -0.353554],\n  [-0.415734, 2.5, -0.277786],\n  [-0.490393, 2.5, -0.097546],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, 0.097545],\n  [-0.46194, 2.5, 0.191341],\n  [-0.415735, 2.5, 0.277785],\n  [-0.353554, 2.5, 0.353553],\n  [-0.277785, 2.5, 0.415735],\n  [-0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [0.097545, 2.5, 0.490393],\n  [0.191342, 2.5, 0.46194],\n  [0.277785, 2.5, 0.415735],\n  [0.353553, 2.5, 0.353553],\n  [0.415735, 2.5, 0.277785],\n  [0.490393, 2.5, 0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, -0.097545],\n  [0.46194, 2.5, -0.191342],\n  [0.415735, 2.5, -0.277785],\n  [0.353553, 2.5, -0.353553],\n  [0.277785, 2.5, -0.415735],\n  [-0.097544, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 0, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.5, 0, 0],\n  [0.490393, 0, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0, 0, 0.5],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.5, 0, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-2, -0.4, 2],\n  [-2, 0, -2],\n  [-2, -0.4, -2],\n  [-2, 0, 2],\n  [2, 0, -2],\n  [-2, 0, -2],\n  [2, 0, 2],\n  [2, -0.4, -2],\n  [2, 0, -2],\n  [2, -0.4, 2],\n  [-2, -0.4, -2],\n  [2, -0.4, -2],\n  [2, 0, -2],\n  [-2, -0.4, -2],\n  [-2, 0, -2],\n  [-2, 0, 2],\n  [2, -0.4, 2],\n  [2, 0, 2],\n  [-2, 0, 2],\n  [2, 0, 2],\n  [2, -0.4, 2],\n  [-2, -0.4, 2],\n  [2, -0.4, -2],\n  [-2, -0.4, 2],\n  [-2, 4, -2],\n  [-2, -0.4, -2.4],\n  [-2, 4, -2.4],\n  [2, -0.4, -2.4],\n  [-2, -0.4, -2.4],\n  [2, 4, -2.4],\n  [2, -0.4, -2.4],\n  [2, 4, -2],\n  [-2, -0.4, -2],\n  [2, -0.4, -2],\n  [2, -0.4, -2.4],\n  [-2, -0.4, -2.4],\n  [-2, 4, -2.4],\n  [2, 4, -2],\n  [2, 4, -2.4],\n  [-2, 4, -2.4],\n  [2, 4, -2.4],\n  [2, 4, -2],\n  [-2, 4, -2],\n  [-2, 4, -2],\n];\n\nexport const modelNormals = [\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 1, 0],\n];\n\nexport const modelIndices = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,\n  22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n  41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59,\n  60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78,\n  79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97,\n  98, 99, 100, 101, 0, 102, 1, 3, 103, 4, 6, 104, 7, 9, 105, 10, 12, 106, 13,\n  15, 107, 16, 18, 108, 19, 21, 109, 22, 24, 110, 25, 27, 111, 28, 30, 112, 31,\n  33, 113, 34, 36, 114, 37, 39, 115, 40, 42, 116, 43, 45, 117, 46, 48, 118, 49,\n  51, 119, 52, 54, 120, 55, 57, 121, 58, 60, 122, 61, 63, 123, 64, 66, 124, 67,\n  69, 125, 70, 72, 126, 73, 75, 127, 76, 78, 128, 79, 81, 129, 82, 84, 130, 85,\n  87, 131, 88, 132, 133, 134, 134, 135, 132, 135, 136, 132, 136, 137, 138, 138,\n  139, 90, 90, 140, 141, 141, 142, 90, 142, 143, 90, 143, 144, 91, 144, 145, 91,\n  145, 146, 91, 91, 147, 148, 148, 149, 150, 150, 151, 152, 152, 153, 92, 92,\n  154, 155, 155, 156, 92, 156, 157, 92, 157, 158, 159, 159, 160, 132, 136, 138,\n  132, 138, 90, 132, 91, 148, 92, 148, 150, 92, 150, 152, 92, 157, 159, 92, 159,\n  132, 92, 90, 143, 91, 132, 90, 92, 93, 161, 94, 96, 162, 97, 163, 164, 165,\n  165, 166, 167, 167, 168, 169, 169, 170, 167, 170, 99, 167, 99, 171, 172, 172,\n  173, 99, 173, 174, 99, 174, 175, 100, 175, 176, 100, 176, 177, 100, 100, 178,\n  179, 179, 180, 181, 181, 182, 183, 183, 184, 101, 101, 185, 186, 186, 187,\n  188, 188, 189, 163, 189, 190, 163, 190, 191, 163, 163, 165, 167, 100, 179,\n  101, 179, 181, 101, 181, 183, 101, 101, 186, 163, 186, 188, 163, 163, 167, 99,\n  99, 174, 100, 163, 99, 101, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201,\n  202, 203, 204, 205, 206, 207, 208, 209, 192, 210, 193, 195, 211, 196, 198,\n  212, 199, 201, 213, 202, 204, 214, 205, 207, 215, 208, 216, 217, 194, 218,\n  219, 220, 221, 199, 222, 223, 224, 225, 226, 202, 227, 228, 229, 230, 216,\n  231, 217, 218, 232, 219, 221, 233, 199, 223, 234, 224, 226, 203, 202, 228,\n  235, 229,\n];\n","import { mat4, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  pointLightMapFragmentShaderSource,\n  pointLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelVertices } from \"./model\";\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      lightPosition_worldSpace: \"vec4\",\n      farPlane: \"float\",\n    },\n  },\n};\n\nconst lightModelPosition = vec4.fromValues(0.0, 3.0, -1.5, 1.0);\nconst lightModelFaces = [\n  {\n    name: \"+X-Axis Face\",\n    id: \"POSITIVE_X\",\n    center: [\n      lightModelPosition[0] + 1.0,\n      lightModelPosition[1],\n      lightModelPosition[2],\n    ],\n    up: [0.0, 1.0, 0.0],\n  },\n  {\n    name: \"-X-Axis Face\",\n    id: \"NEGATIVE_X\",\n    center: [\n      lightModelPosition[0] - 1.0,\n      lightModelPosition[1],\n      lightModelPosition[2],\n    ],\n    up: [0.0, 1.0, 0.0],\n  },\n  {\n    name: \"+Y-Axis Face\",\n    id: \"POSITIVE_Y\",\n    center: [\n      lightModelPosition[0],\n      lightModelPosition[1] + 1.0,\n      lightModelPosition[2],\n    ],\n    up: [0.0, 0.0, -1.0],\n  },\n  {\n    name: \"-Y-Axis Face\",\n    id: \"NEGATIVE_Y\",\n    center: [\n      lightModelPosition[0],\n      lightModelPosition[1] - 1.0,\n      lightModelPosition[2],\n    ],\n    up: [0.0, 0.0, 1.0],\n  },\n  {\n    name: \"+Z-Axis Face\",\n    id: \"POSITIVE_Z\",\n    center: [\n      lightModelPosition[0],\n      lightModelPosition[1],\n      lightModelPosition[2] + 1.0,\n    ],\n    up: [0.0, 1.0, 0.0],\n  },\n  {\n    name: \"-Z-Axis Face\",\n    id: \"NEGATIVE_Z\",\n    center: [\n      lightModelPosition[0],\n      lightModelPosition[1],\n      lightModelPosition[2] - 1.0,\n    ],\n    up: [0.0, 1.0, 0.0],\n  },\n];\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingPointLightMapExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    indices: modelIndices,\n    nearPlane: 0.5,\n    farPlane: 10.0,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [currentFace, updateCurrentFace] = useState(3);\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n  });\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          pointLightMapVertexShaderSource,\n          pointLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      let shouldRender = true;\n\n      const renderFace = currentFace;\n      const renderScene = () => {\n        webGlRef.renderScene(({ gl, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const depthProjectionMatrix = mat4.create();\n          mat4.perspective(\n            depthProjectionMatrix,\n            (90 * Math.PI) / 180,\n            1.0,\n            scene.nearPlane,\n            scene.farPlane,\n          );\n\n          gl.clearColor(1.0, 1.0, 1.0, 1.0);\n          gl.clearDepth(1.0);\n          gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n          const lightViewMatrix = mat4.create();\n          mat4.lookAt(\n            lightViewMatrix,\n            lightModelPosition,\n            lightModelFaces[renderFace].center,\n            lightModelFaces[renderFace].up,\n          );\n\n          const lightModelMatrix = mat4.create();\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            depthProjectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            lightModelMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.fragment.uniformLocations.lightPosition_worldSpace,\n            lightModelPosition,\n          );\n\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.farPlane,\n            scene.farPlane,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n\n          requestAnimationFrame(renderScene);\n        });\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => {\n        shouldRender = false;\n      };\n    }),\n    [sceneBuffer, currentFace],\n  );\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <select\n        value={currentFace}\n        onChange={({ target: { value } }) => updateCurrentFace(value)}\n        onBlur={({ target: { value } }) => updateCurrentFace(value)}\n      >\n        {lightModelFaces.map((face, i) => (\n          <option key={i} value={i}>\n            {face.name}\n          </option>\n        ))}\n      </select>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    World Position: ${coordArrToString(lightModelPosition)}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nFace:\n    Center: ${coordArrToString(lightModelFaces[currentFace].center)}\n    Up: ${coordArrToString(lightModelFaces[currentFace].up)}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingPointLightMapExample);\n","import fragmentShader from \"!raw-loader!./shadow-example/fragment.glsl\";\nimport vertexShader from \"!raw-loader!./shadow-example/vertex.glsl\";\n\nexport const pointLightShadowVertexShaderSource = vertexShader;\nexport const pointLightShadowFragmentShaderSource = fragmentShader;\n","export default \"varying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nuniform highp vec3 lightColor;\\nuniform highp float lightIntensity;\\nuniform highp vec4 lightPosition_worldSpace;\\n\\nuniform highp float ambientFactor;\\nuniform highp float farPlane;\\n\\nuniform samplerCube shadowMapTextureSampler;\\n\\nconst highp float acneBias = 0.02;\\n\\nhighp float getAverageVisibility(highp vec3 fragmentPosition_lightSpace) {\\n  highp float currentDepth = length(fragmentPosition_lightSpace) / farPlane;\\n  highp vec3 fragmentDirection_lightSpace = normalize(fragmentPosition_lightSpace);\\n\\n  highp float visibility = 0.0;\\n  for (int xi = -2; xi <= 2; xi++) {\\n    for (int yi = -2; yi <= 2; yi++) {\\n      for (int zi = -2; zi <= 2; zi++) {\\n        highp float closestDepth = textureCube(shadowMapTextureSampler, fragmentDirection_lightSpace + (vec3(xi, yi, zi) * 0.02)).z;\\n        visibility += currentDepth - acneBias > closestDepth ? 0.0 : 1.0;\\n      }\\n    }\\n  }\\n  return visibility / 125.0;\\n}\\n\\nhighp vec3 getDiffuseLighting() {\\n  highp vec3 lightColorIntensity = lightColor * lightIntensity;\\n  highp float diffuseStrength = clamp(dot(fragmentNormal_viewSpace, lightDirection_viewSpace), 0.0, 1.0);\\n\\n  highp float distanceFromLight = distance(fragmentPosition_worldSpace, lightPosition_worldSpace);\\n  return (lightColorIntensity * diffuseStrength) / (distanceFromLight * distanceFromLight);\\n}\\n\\nvoid main() {\\n  highp vec4 surfaceColor = vec4(1.0);\\n  highp vec4 ambientColor = vec4(surfaceColor);\\n\\n  highp vec3 diffuseLight = getDiffuseLighting();\\n\\n  highp vec3 fragmentPosition_lightSpace = (fragmentPosition_worldSpace - lightPosition_worldSpace).xyz;\\n  highp float fragmentVisibility = getAverageVisibility(fragmentPosition_lightSpace);\\n\\n  gl_FragColor.rgb = (ambientColor.rgb * ambientFactor) + (fragmentVisibility * surfaceColor.rgb * diffuseLight);\\n  gl_FragColor.a = surfaceColor.a;\\n}\";","import { mat4, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  pointLightMapFragmentShaderSource,\n  pointLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model\";\nimport {\n  pointLightShadowFragmentShaderSource,\n  pointLightShadowVertexShaderSource,\n} from \"./shadow-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      lightPosition_worldSpace: \"float\",\n      farPlane: \"float\",\n    },\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightPosition_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      ambientFactor: \"float\",\n      farPlane: \"float\",\n      shadowMapTextureSampler: \"samplerCube\",\n    },\n  },\n};\n\nconst lightModelPosition = vec4.fromValues(0.0, 3.0, -1.5, 1.0);\nconst lightModelFaces = [\n  {\n    name: \"+X-Axis Face\",\n    id: \"POSITIVE_X\",\n    center: [\n      lightModelPosition[0] + 1.0,\n      lightModelPosition[1],\n      lightModelPosition[2],\n    ],\n    up: [0.0, -1.0, 0.0],\n  },\n  {\n    name: \"-X-Axis Face\",\n    id: \"NEGATIVE_X\",\n    center: [\n      lightModelPosition[0] - 1.0,\n      lightModelPosition[1],\n      lightModelPosition[2],\n    ],\n    up: [0.0, -1.0, 0.0],\n  },\n  {\n    name: \"+Y-Axis Face\",\n    id: \"POSITIVE_Y\",\n    center: [\n      lightModelPosition[0],\n      lightModelPosition[1] + 1.0,\n      lightModelPosition[2],\n    ],\n    up: [0.0, 0.0, 1.0],\n  },\n  {\n    name: \"-Y-Axis Face\",\n    id: \"NEGATIVE_Y\",\n    center: [\n      lightModelPosition[0],\n      lightModelPosition[1] - 1.0,\n      lightModelPosition[2],\n    ],\n    up: [0.0, 0.0, -1.0],\n  },\n  {\n    name: \"+Z-Axis Face\",\n    id: \"POSITIVE_Z\",\n    center: [\n      lightModelPosition[0],\n      lightModelPosition[1],\n      lightModelPosition[2] + 1.0,\n    ],\n    up: [0.0, -1.0, 0.0],\n  },\n  {\n    name: \"-Z-Axis Face\",\n    id: \"NEGATIVE_Z\",\n    center: [\n      lightModelPosition[0],\n      lightModelPosition[1],\n      lightModelPosition[2] - 1.0,\n    ],\n    up: [0.0, -1.0, 0.0],\n  },\n];\nconst lightColor = vec3.fromValues(0.3, 0.3, 0.3);\nconst lightIntensity = 20.0;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingPointLightShadowExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n    nearPlane: 0.5,\n    farPlane: 10.0,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(\n    lightModelFaces.map(() => null),\n  );\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          pointLightMapVertexShaderSource,\n          pointLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createCubeMapRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        lightModelFaces.map((face, i) =>\n          webGlRef.createCubeMapTargetFramebuffer(\n            shadowMapSceneBuffer.shadowMapTexture,\n            face.id,\n            shadowMapFramebuffer[i],\n            true,\n          ),\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(\n      shadowMapFramebuffer.filter((framebuffer) => framebuffer !== null)\n        .length === lightModelFaces.length,\n      () => {\n        updateShaderProgram(\n          webGlRef.createShaderProgram(\n            pointLightShadowVertexShaderSource,\n            pointLightShadowFragmentShaderSource,\n          ),\n        );\n      },\n    ),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      let shouldRender = true;\n\n      const renderScene = () => {\n        shadowMapFramebuffer.forEach((framebuffer, i) => {\n          webGlRef.renderToCubeMapFramebuffer(framebuffer, () => {\n            webGlRef.renderScene(({ gl }) => {\n              if (!shouldRender) {\n                return;\n              }\n\n              const lightProjectionMatrix = mat4.create();\n              mat4.perspective(\n                lightProjectionMatrix,\n                (90 * Math.PI) / 180,\n                1.0,\n                scene.nearPlane,\n                scene.farPlane,\n              );\n\n              gl.clearColor(1.0, 1.0, 1.0, 1.0);\n              gl.clearDepth(1.0);\n              gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n              const lightViewMatrix = mat4.create();\n              mat4.lookAt(\n                lightViewMatrix,\n                lightModelPosition,\n                lightModelFaces[i].center,\n                lightModelFaces[i].up,\n              );\n\n              const lightModelMatrix = mat4.create();\n\n              gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n              gl.vertexAttribPointer(\n                shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n                3,\n                gl.FLOAT,\n                false,\n                0,\n                0,\n              );\n              gl.enableVertexAttribArray(\n                shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              );\n\n              gl.bindBuffer(\n                gl.ELEMENT_ARRAY_BUFFER,\n                shadowMapSceneBuffer.indices,\n              );\n\n              gl.useProgram(shadowMapShaderProgram);\n\n              gl.uniformMatrix4fv(\n                shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n                false,\n                lightProjectionMatrix,\n              );\n              gl.uniformMatrix4fv(\n                shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n                false,\n                lightViewMatrix,\n              );\n              gl.uniformMatrix4fv(\n                shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n                false,\n                lightModelMatrix,\n              );\n\n              gl.uniform4fv(\n                shadowMapShaderInfo.fragment.uniformLocations\n                  .lightPosition_worldSpace,\n                lightModelPosition,\n              );\n              gl.uniform1f(\n                shadowMapShaderInfo.fragment.uniformLocations.farPlane,\n                scene.farPlane,\n              );\n\n              gl.drawElements(\n                gl.TRIANGLES,\n                scene.indices.length,\n                gl.UNSIGNED_SHORT,\n                0,\n              );\n            });\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-9.0, 6.0, -0.5],\n            [0.0, 1.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightPosition_worldSpace,\n            lightModelPosition,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.farPlane,\n            scene.farPlane,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(\n            gl.TEXTURE_CUBE_MAP,\n            shadowMapSceneBuffer.shadowMapTexture,\n          );\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => {\n        shouldRender = false;\n      };\n    }),\n    [sceneBuffer],\n  );\n\n  const colorCoords = { x: \"r\", y: \"g\", z: \"b\" };\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n    Lighting:\n        Ambient Factor: ${scene.ambientFactor}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    World Position: ${coordArrToString(lightModelPosition)}\n    Color: ${coordArrToString(lightColor, colorCoords)}\n    Intensity: ${lightIntensity}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingPointLightShadowExample);\n","export default \"attribute vec4 vertexPosition;\\nattribute vec3 vertexNormal;\\n\\nuniform mat4 modelMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nuniform vec4 lightPosition_worldSpace;\\nuniform vec3 lightColor;\\nuniform float lightIntensity;\\n\\nvarying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nvoid main() {\\n  highp vec4 vertexPosition_worldSpace = modelMatrix * vertexPosition;\\n  highp vec4 vertexPosition_viewSpace = viewMatrix * vertexPosition_worldSpace;\\n  \\n  gl_Position = projectionMatrix * vertexPosition_viewSpace;\\n  \\n  fragmentPosition_worldSpace = vertexPosition_worldSpace;\\n\\n  highp vec4 lightPosition_viewSpace = viewMatrix * lightPosition_worldSpace;\\n  fragmentNormal_viewSpace = (viewMatrix * modelMatrix * vec4(vertexNormal, 0.0)).xyz;\\n  lightDirection_viewSpace = normalize((lightPosition_viewSpace - vertexPosition_viewSpace).xyz);\\n}\";","import fragmentShader from \"!raw-loader!./map-example/fragment.glsl\";\nimport vertexShader from \"!raw-loader!./map-example/vertex.glsl\";\n\nexport const spotLightMapVertexShaderSource = vertexShader;\nexport const spotLightMapFragmentShaderSource = fragmentShader;\n","export default \"attribute vec4 vertexPosition;\\n\\nuniform mat4 modelMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vertexPosition;\\n}\";","export default \"void main() {\\n  gl_FragColor = vec4(vec3(gl_FragCoord.z), 1.0);\\n}\";","export const modelVertices = [\n  [0, 2.5, -0.5],\n  [0.097545, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.097545, 0, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.191342, 0, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.277785, 0, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.353553, 0, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.415735, 0, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 0, -0.097545],\n  [0.46194, 0, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 0, 0],\n  [0.490393, 0, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 0, 0.097545],\n  [0.5, 0, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.490393, 0, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.46194, 0, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.415735, 0, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.353553, 0, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0.277785, 0, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 0, 0.490393],\n  [0.191342, 0, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 0, 0.5],\n  [0.097545, 0, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 0, 0.490393],\n  [0, 0, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 0, 0.097545],\n  [-0.46194, 0, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 0, 0],\n  [-0.490393, 0, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.5, 0, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-0.277785, 0, -0.415735],\n  [-0.46194, 2.5, -0.191342],\n  [-0.191342, 2.5, 0.46194],\n  [0.46194, 2.5, 0.191342],\n  [-0.191341, 2.5, -0.46194],\n  [-0.097544, 0, -0.490393],\n  [-0.191341, 0, -0.46194],\n  [-0.097544, 2.5, -0.490393],\n  [0, 0, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0.490393, 0, -0.097545],\n  [0.097545, 0, 0.490393],\n  [-0.490393, 0, 0.097545],\n  [0.097545, 2.5, -0.490393],\n  [0.191342, 2.5, -0.46194],\n  [0.277785, 2.5, -0.415735],\n  [0.353553, 2.5, -0.353553],\n  [0.415735, 2.5, -0.277785],\n  [0.46194, 2.5, -0.191342],\n  [0.490393, 2.5, -0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, 0.097545],\n  [0.46194, 2.5, 0.191342],\n  [0.415735, 2.5, 0.277785],\n  [0.353553, 2.5, 0.353553],\n  [0.277785, 2.5, 0.415735],\n  [0.191342, 2.5, 0.46194],\n  [0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [-0.097545, 2.5, 0.490393],\n  [-0.191342, 2.5, 0.46194],\n  [-0.277785, 2.5, 0.415735],\n  [-0.353554, 2.5, 0.353553],\n  [-0.415735, 2.5, 0.277785],\n  [-0.46194, 2.5, 0.191341],\n  [-0.490393, 2.5, 0.097545],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, -0.097546],\n  [-0.46194, 2.5, -0.191342],\n  [-0.415734, 2.5, -0.277786],\n  [-0.353553, 2.5, -0.353554],\n  [-0.277785, 2.5, -0.415735],\n  [-0.191341, 2.5, -0.46194],\n  [0.191342, 2.5, -0.46194],\n  [0.097545, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 2.5, -0.490393],\n  [-0.191341, 2.5, -0.46194],\n  [-0.277785, 2.5, -0.415735],\n  [-0.353553, 2.5, -0.353554],\n  [-0.415734, 2.5, -0.277786],\n  [-0.490393, 2.5, -0.097546],\n  [-0.5, 2.5, 0],\n  [-0.490393, 2.5, 0.097545],\n  [-0.46194, 2.5, 0.191341],\n  [-0.415735, 2.5, 0.277785],\n  [-0.353554, 2.5, 0.353553],\n  [-0.277785, 2.5, 0.415735],\n  [-0.097545, 2.5, 0.490393],\n  [0, 2.5, 0.5],\n  [0.097545, 2.5, 0.490393],\n  [0.191342, 2.5, 0.46194],\n  [0.277785, 2.5, 0.415735],\n  [0.353553, 2.5, 0.353553],\n  [0.415735, 2.5, 0.277785],\n  [0.490393, 2.5, 0.097545],\n  [0.5, 2.5, 0],\n  [0.490393, 2.5, -0.097545],\n  [0.46194, 2.5, -0.191342],\n  [0.415735, 2.5, -0.277785],\n  [0.353553, 2.5, -0.353553],\n  [0.277785, 2.5, -0.415735],\n  [-0.097544, 2.5, -0.490393],\n  [0, 2.5, -0.5],\n  [-0.097544, 0, -0.490393],\n  [0, 0, -0.5],\n  [0.097545, 0, -0.490393],\n  [0.191342, 0, -0.46194],\n  [0.277785, 0, -0.415735],\n  [0.353553, 0, -0.353553],\n  [0.415735, 0, -0.277785],\n  [0.46194, 0, -0.191342],\n  [0.5, 0, 0],\n  [0.490393, 0, 0.097545],\n  [0.46194, 0, 0.191342],\n  [0.415735, 0, 0.277785],\n  [0.353553, 0, 0.353553],\n  [0.277785, 0, 0.415735],\n  [0.191342, 0, 0.46194],\n  [0, 0, 0.5],\n  [-0.097545, 0, 0.490393],\n  [-0.191342, 0, 0.46194],\n  [-0.277785, 0, 0.415735],\n  [-0.353554, 0, 0.353553],\n  [-0.415735, 0, 0.277785],\n  [-0.46194, 0, 0.191341],\n  [-0.5, 0, 0],\n  [-0.490393, 0, -0.097546],\n  [-0.46194, 0, -0.191342],\n  [-0.415734, 0, -0.277786],\n  [-0.353553, 0, -0.353554],\n  [-0.277785, 0, -0.415735],\n  [-0.191341, 0, -0.46194],\n  [-2, -0.4, 2],\n  [-2, 0, -2],\n  [-2, -0.4, -2],\n  [-2, 0, 2],\n  [2, 0, -2],\n  [-2, 0, -2],\n  [2, 0, 2],\n  [2, -0.4, -2],\n  [2, 0, -2],\n  [2, -0.4, 2],\n  [-2, -0.4, -2],\n  [2, -0.4, -2],\n  [2, 0, -2],\n  [-2, -0.4, -2],\n  [-2, 0, -2],\n  [-2, 0, 2],\n  [2, -0.4, 2],\n  [2, 0, 2],\n  [-2, 0, 2],\n  [2, 0, 2],\n  [2, -0.4, 2],\n  [-2, -0.4, 2],\n  [2, -0.4, -2],\n  [-2, -0.4, 2],\n  [-2, 4, -2],\n  [-2, -0.4, -2.4],\n  [-2, 4, -2.4],\n  [2, -0.4, -2.4],\n  [-2, -0.4, -2.4],\n  [2, 4, -2.4],\n  [2, -0.4, -2.4],\n  [2, 4, -2],\n  [-2, -0.4, -2],\n  [2, -0.4, -2],\n  [2, -0.4, -2.4],\n  [-2, -0.4, -2.4],\n  [-2, 4, -2.4],\n  [2, 4, -2],\n  [2, 4, -2.4],\n  [-2, 4, -2.4],\n  [2, 4, -2.4],\n  [2, 4, -2],\n  [-2, 4, -2],\n  [-2, 4, -2],\n];\n\nexport const modelNormals = [\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0.098, 0, -0.9952],\n  [0.2903, 0, -0.9569],\n  [0.4714, 0, -0.8819],\n  [0.6344, 0, -0.773],\n  [0.773, 0, -0.6344],\n  [0.8819, 0, -0.4714],\n  [0.9569, 0, -0.2903],\n  [0.9952, 0, -0.098],\n  [0.9952, 0, 0.098],\n  [0.9569, 0, 0.2903],\n  [0.8819, 0, 0.4714],\n  [0.773, 0, 0.6344],\n  [0.6344, 0, 0.773],\n  [0.4714, 0, 0.8819],\n  [0.2903, 0, 0.9569],\n  [0.098, 0, 0.9952],\n  [-0.098, 0, 0.9952],\n  [-0.2903, 0, 0.9569],\n  [-0.4714, 0, 0.8819],\n  [-0.6344, 0, 0.773],\n  [-0.773, 0, 0.6344],\n  [-0.8819, 0, 0.4714],\n  [-0.9569, 0, 0.2903],\n  [-0.9952, 0, 0.098],\n  [-0.9952, 0, -0.098],\n  [-0.9569, 0, -0.2903],\n  [-0.8819, 0, -0.4714],\n  [-0.773, 0, -0.6344],\n  [-0.6344, 0, -0.773],\n  [-0.4714, 0, -0.8819],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-0.2903, 0, -0.9569],\n  [-0.098, 0, -0.9952],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [0, 1, 0],\n  [1, 0, 0],\n  [0, -1, 0],\n  [0, 0, -1],\n  [0, 0, 1],\n  [-1, 0, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [0, 0, -1],\n  [0, 0, -1],\n  [1, 0, 0],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, -1, 0],\n  [0, -1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [0, 1, 0],\n  [-1, 0, 0],\n  [0, 0, -1],\n  [1, 0, 0],\n  [0, 0, 1],\n  [0, 1, 0],\n];\n\nexport const modelIndices = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,\n  22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n  41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59,\n  60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78,\n  79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97,\n  98, 99, 100, 101, 0, 102, 1, 3, 103, 4, 6, 104, 7, 9, 105, 10, 12, 106, 13,\n  15, 107, 16, 18, 108, 19, 21, 109, 22, 24, 110, 25, 27, 111, 28, 30, 112, 31,\n  33, 113, 34, 36, 114, 37, 39, 115, 40, 42, 116, 43, 45, 117, 46, 48, 118, 49,\n  51, 119, 52, 54, 120, 55, 57, 121, 58, 60, 122, 61, 63, 123, 64, 66, 124, 67,\n  69, 125, 70, 72, 126, 73, 75, 127, 76, 78, 128, 79, 81, 129, 82, 84, 130, 85,\n  87, 131, 88, 132, 133, 134, 134, 135, 132, 135, 136, 132, 136, 137, 138, 138,\n  139, 90, 90, 140, 141, 141, 142, 90, 142, 143, 90, 143, 144, 91, 144, 145, 91,\n  145, 146, 91, 91, 147, 148, 148, 149, 150, 150, 151, 152, 152, 153, 92, 92,\n  154, 155, 155, 156, 92, 156, 157, 92, 157, 158, 159, 159, 160, 132, 136, 138,\n  132, 138, 90, 132, 91, 148, 92, 148, 150, 92, 150, 152, 92, 157, 159, 92, 159,\n  132, 92, 90, 143, 91, 132, 90, 92, 93, 161, 94, 96, 162, 97, 163, 164, 165,\n  165, 166, 167, 167, 168, 169, 169, 170, 167, 170, 99, 167, 99, 171, 172, 172,\n  173, 99, 173, 174, 99, 174, 175, 100, 175, 176, 100, 176, 177, 100, 100, 178,\n  179, 179, 180, 181, 181, 182, 183, 183, 184, 101, 101, 185, 186, 186, 187,\n  188, 188, 189, 163, 189, 190, 163, 190, 191, 163, 163, 165, 167, 100, 179,\n  101, 179, 181, 101, 181, 183, 101, 101, 186, 163, 186, 188, 163, 163, 167, 99,\n  99, 174, 100, 163, 99, 101, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201,\n  202, 203, 204, 205, 206, 207, 208, 209, 192, 210, 193, 195, 211, 196, 198,\n  212, 199, 201, 213, 202, 204, 214, 205, 207, 215, 208, 216, 217, 194, 218,\n  219, 220, 221, 199, 222, 223, 224, 225, 226, 202, 227, 228, 229, 230, 216,\n  231, 217, 218, 232, 219, 221, 233, 199, 223, 234, 224, 226, 203, 202, 228,\n  235, 229,\n];\n","import { mat4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  spotLightMapFragmentShaderSource,\n  spotLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelVertices } from \"./model\";\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst lightModelPosition = [-3.0, 10.0, -6.0];\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingSpotLightMapExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    indices: modelIndices,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n  });\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          spotLightMapVertexShaderSource,\n          spotLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        webGlRef.renderScene(({ gl, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const { fov, aspect } = webGlRef.canvasDimensions;\n          const depthProjectionMatrix = mat4.create();\n          mat4.perspective(depthProjectionMatrix, fov, aspect, 5.0, 1000.0);\n\n          gl.clearColor(1.0, 1.0, 1.0, 1.0);\n          gl.clearDepth(1.0);\n          gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n          const lightViewMatrix = mat4.create();\n          mat4.lookAt(\n            lightViewMatrix,\n            lightModelPosition,\n            [1.0, -0.75, -0.5],\n            [0.0, 1.0, 0.0],\n          );\n\n          const scaledModelMatrix = mat4.create();\n          mat4.scale(scaledModelMatrix, modelMatrix, [1.3, 1.3, 1.3]);\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            depthProjectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            scaledModelMatrix,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n\n          requestAnimationFrame(renderScene);\n        });\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    World Position: ${coordArrToString(lightModelPosition)}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingSpotLightMapExample);\n","import fragmentShader from \"!raw-loader!./shadow-example/fragment.glsl\";\nimport vertexShader from \"!raw-loader!./shadow-example/vertex.glsl\";\n\nexport const spotLightShadowVertexShaderSource = vertexShader;\nexport const spotLightShadowFragmentShaderSource = fragmentShader;\n","export default \"attribute vec4 vertexPosition;\\nattribute vec3 vertexNormal;\\n\\nuniform mat4 modelMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nuniform mat4 lightModelMatrix;\\nuniform mat4 lightViewMatrix;\\nuniform mat4 lightProjectionMatrix;\\n\\nuniform vec4 lightPosition_worldSpace;\\nuniform vec3 lightColor;\\nuniform float lightIntensity;\\n\\nvarying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nvarying highp vec4 fragmentPositionFromLight;\\n\\nvoid main() {\\n  highp vec4 vertexPosition_worldSpace = modelMatrix * vertexPosition;\\n  highp vec4 vertexPosition_viewSpace = viewMatrix * vertexPosition_worldSpace;\\n  \\n  gl_Position = projectionMatrix * vertexPosition_viewSpace;\\n\\n  fragmentPosition_worldSpace = vertexPosition_worldSpace;\\n  fragmentPositionFromLight = lightProjectionMatrix * lightViewMatrix * lightModelMatrix * vertexPosition;\\n  \\n  highp vec4 lightPosition_viewSpace = viewMatrix * lightPosition_worldSpace;\\n  fragmentNormal_viewSpace = (viewMatrix * modelMatrix * vec4(vertexNormal, 0.0)).xyz;\\n  lightDirection_viewSpace = normalize((lightPosition_viewSpace - vertexPosition_viewSpace).xyz);\\n}\";","export default \"varying highp vec4 fragmentPositionFromLight;\\n\\nvarying highp vec4 fragmentPosition_worldSpace;\\nvarying highp vec3 fragmentNormal_viewSpace;\\nvarying highp vec3 lightDirection_viewSpace;\\n\\nuniform highp vec2 texelSize;\\nuniform highp vec3 lightColor;\\nuniform highp float lightIntensity;\\nuniform highp vec4 lightPosition_worldSpace;\\nuniform highp float ambientFactor;\\nuniform sampler2D shadowMapTextureSampler;\\n\\nconst highp float acneBias = 0.025;\\n\\nhighp float getAverageVisibility(highp vec2 shadowMapCoords, highp float currentDepth) {\\n  highp float visibility = 0.0;\\n  for (int x = -2; x <= 2; x++) {\\n    for (int y = -2; y <= 2; y++) {\\n      highp float closestDepth = texture2D(shadowMapTextureSampler, shadowMapCoords.xy + (vec2(x, y) * texelSize)).z;\\n      visibility += currentDepth - acneBias > closestDepth ? 0.0 : 1.0;\\n    }\\n  }\\n  return visibility / 25.0;\\n}\\n\\nhighp vec3 getDiffuseLighting() {\\n  highp vec3 lightColorIntensity = lightColor * lightIntensity;\\n  highp float diffuseStrength = clamp(dot(fragmentNormal_viewSpace, lightDirection_viewSpace), 0.0, 1.0);\\n\\n  highp float distanceFromLight = distance(fragmentPosition_worldSpace, lightPosition_worldSpace);\\n  return (lightColorIntensity * diffuseStrength) / (distanceFromLight * distanceFromLight);\\n}\\n\\nvoid main() {\\n  highp vec4 surfaceColor = vec4(1.0);\\n  highp vec4 ambientColor = vec4(surfaceColor);\\n\\n  highp vec3 diffuseLight = getDiffuseLighting();\\n\\n  highp vec3 shadowMapCoords = (fragmentPositionFromLight.xyz / fragmentPositionFromLight.w) * 0.5 + 0.5;\\n\\n  highp float currentDepth = shadowMapCoords.z;\\n  highp float fragmentVisibility = getAverageVisibility(shadowMapCoords.xy, currentDepth);\\n\\n  gl_FragColor.rgb = (ambientColor.rgb * ambientFactor) + (fragmentVisibility * surfaceColor.rgb * diffuseLight);\\n  gl_FragColor.a = surfaceColor.a;\\n}\";","import { mat4, vec2, vec3, vec4 } from \"gl-matrix\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { coordArrToString, runOnPredicate } from \"../../../util\";\nimport wrapExample from \"../../../webgl-example-view\";\nimport WebGlWrapper from \"../../../webgl-wrapper\";\nimport {\n  spotLightMapFragmentShaderSource,\n  spotLightMapVertexShaderSource,\n} from \"./map-example-shaders\";\nimport { modelIndices, modelNormals, modelVertices } from \"./model\";\nimport {\n  spotLightShadowFragmentShaderSource,\n  spotLightShadowVertexShaderSource,\n} from \"./shadow-example-shaders\";\n\nconst shadowMapShaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {},\n  },\n};\n\nconst shaderProgramInfo = {\n  vertex: {\n    attributeLocations: {\n      vertexPosition: \"vec4\",\n      vertexNormal: \"vec4\",\n    },\n    uniformLocations: {\n      modelMatrix: \"mat4\",\n      viewMatrix: \"mat4\",\n      projectionMatrix: \"mat4\",\n\n      lightModelMatrix: \"mat4\",\n      lightViewMatrix: \"mat4\",\n      lightProjectionMatrix: \"mat4\",\n\n      lightPosition_worldSpace: \"vec4\",\n      lightColor: \"vec3\",\n      lightIntensity: \"float\",\n    },\n  },\n  fragment: {\n    attributeLocations: {},\n    uniformLocations: {\n      texelSize: \"vec2\",\n      ambientFactor: \"float\",\n      shadowMapTextureSampler: \"sampler2D\",\n    },\n  },\n};\n\nconst lightModelPosition = vec4.fromValues(-3.0, 10.0, -6.0, 1.0);\nconst lightColor = vec3.fromValues(0.3, 0.3, 0.3);\nconst lightIntensity = 300.0;\n\nconst sceneModelPosition = mat4.create();\n\nconst ShadowMappingSpotLightShadowExample = () => {\n  const scene = {\n    vertices: modelVertices,\n    normals: modelNormals,\n    indices: modelIndices,\n    ambientFactor: 0.1,\n  };\n  const [webGlRef, updateWebGlRef] = useState(null);\n  const [shadowMapShaderProgram, updateShadowMapShaderProgram] = useState(null);\n  const [shadowMapShaderInfo, updateShadowMapShaderInfo] = useState(null);\n  const [shadowMapSceneBuffer, updateShadowMapSceneBuffer] = useState({\n    vertices: null,\n    indices: null,\n    shadowMapTexture: null,\n  });\n  const [shaderProgram, updateShaderProgram] = useState(null);\n  const [shaderInfo, updateShaderInfo] = useState(null);\n  const [sceneBuffer, updateSceneBuffer] = useState({\n    vertices: null,\n    normals: null,\n    indices: null,\n  });\n  const [shadowMapFramebuffer, updateShadowMapFramebuffer] = useState(null);\n  const [shouldRender, updateShouldRender] = useState(true);\n\n  const canvasRef = useRef();\n  useEffect(() => {\n    if (canvasRef.current !== null) {\n      const newWebGlRef = new WebGlWrapper(\n        canvasRef.current,\n        sceneModelPosition,\n      );\n      updateWebGlRef(newWebGlRef);\n\n      return () => {\n        updateWebGlRef(null);\n        newWebGlRef.destroy();\n      };\n    }\n  }, [canvasRef]);\n\n  useEffect(\n    runOnPredicate(webGlRef !== null, () => {\n      updateShadowMapShaderProgram(\n        webGlRef.createShaderProgram(\n          spotLightMapVertexShaderSource,\n          spotLightMapFragmentShaderSource,\n        ),\n      );\n    }),\n    [webGlRef],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderProgram !== null, () => {\n      updateShadowMapShaderInfo(\n        webGlRef.getDataLocations(\n          shadowMapShaderProgram,\n          shadowMapShaderProgramInfo,\n        ),\n      );\n    }),\n    [shadowMapShaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapShaderInfo !== null, () => {\n      updateShadowMapSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          shadowMapSceneBuffer.vertices,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          shadowMapSceneBuffer.indices,\n        ),\n        shadowMapTexture: webGlRef.createRenderTargetTexture(\n          shadowMapSceneBuffer.shadowMapTexture,\n        ),\n      });\n    }),\n    [shadowMapShaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapSceneBuffer.shadowMapTexture !== null, () => {\n      updateShadowMapFramebuffer(\n        webGlRef.createTextureTargetFramebuffer(\n          shadowMapSceneBuffer.shadowMapTexture,\n          shadowMapFramebuffer,\n          true,\n        ),\n      );\n    }),\n    [shadowMapSceneBuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shadowMapFramebuffer !== null, () => {\n      updateShaderProgram(\n        webGlRef.createShaderProgram(\n          spotLightShadowVertexShaderSource,\n          spotLightShadowFragmentShaderSource,\n        ),\n      );\n    }),\n    [shadowMapFramebuffer],\n  );\n\n  useEffect(\n    runOnPredicate(shaderProgram !== null, () => {\n      updateShaderInfo(\n        webGlRef.getDataLocations(shaderProgram, shaderProgramInfo),\n      );\n    }),\n    [shaderProgram],\n  );\n\n  useEffect(\n    runOnPredicate(shaderInfo !== null, () => {\n      updateSceneBuffer({\n        vertices: webGlRef.createStaticDrawArrayBuffer(\n          scene.vertices.flat(),\n          sceneBuffer.vertices,\n        ),\n        normals: webGlRef.createStaticDrawArrayBuffer(\n          scene.normals.flat(),\n          sceneBuffer.normals,\n        ),\n        indices: webGlRef.createElementArrayBuffer(\n          scene.indices.flat(),\n          sceneBuffer.indices,\n        ),\n      });\n    }),\n    [shaderInfo],\n  );\n\n  useEffect(\n    runOnPredicate(sceneBuffer.vertices !== null, () => {\n      updateShouldRender(true);\n\n      const renderScene = () => {\n        const texelSize = vec2.fromValues(\n          1.0 / webGlRef.canvasDimensions.width,\n          1.0 / webGlRef.canvasDimensions.height,\n        );\n        const lightModelMatrix = mat4.create();\n        const lightViewMatrix = mat4.create();\n        const lightProjectionMatrix = mat4.create();\n\n        webGlRef.renderToFramebuffer(shadowMapFramebuffer, () => {\n          webGlRef.renderScene(({ gl, modelMatrix }) => {\n            if (!shouldRender) {\n              return;\n            }\n\n            const { fov, aspect } = webGlRef.canvasDimensions;\n            mat4.perspective(lightProjectionMatrix, fov, aspect, 5.0, 1000.0);\n\n            gl.clearColor(1.0, 1.0, 1.0, 1.0);\n            gl.clearDepth(1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            mat4.lookAt(\n              lightViewMatrix,\n              [\n                lightModelPosition[0],\n                lightModelPosition[1],\n                lightModelPosition[2],\n              ],\n              [1.0, -0.75, -0.5],\n              [0.0, 1.0, 0.0],\n            );\n\n            mat4.scale(lightModelMatrix, modelMatrix, [1.3, 1.3, 1.3]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, shadowMapSceneBuffer.vertices);\n            gl.vertexAttribPointer(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n              3,\n              gl.FLOAT,\n              false,\n              0,\n              0,\n            );\n            gl.enableVertexAttribArray(\n              shadowMapShaderInfo.vertex.attributeLocations.vertexPosition,\n            );\n\n            gl.bindBuffer(\n              gl.ELEMENT_ARRAY_BUFFER,\n              shadowMapSceneBuffer.indices,\n            );\n\n            gl.useProgram(shadowMapShaderProgram);\n\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.projectionMatrix,\n              false,\n              lightProjectionMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.viewMatrix,\n              false,\n              lightViewMatrix,\n            );\n            gl.uniformMatrix4fv(\n              shadowMapShaderInfo.vertex.uniformLocations.modelMatrix,\n              false,\n              lightModelMatrix,\n            );\n\n            gl.drawElements(\n              gl.TRIANGLES,\n              scene.indices.length,\n              gl.UNSIGNED_SHORT,\n              0,\n            );\n          });\n        });\n\n        webGlRef.renderScene(({ gl, projectionMatrix, _, modelMatrix }) => {\n          if (!shouldRender) {\n            return;\n          }\n\n          const viewMatrix = mat4.create();\n          mat4.lookAt(\n            viewMatrix,\n            [-9.0, 6.0, -0.5],\n            [0.0, 1.0, 0.0],\n            [0.0, 1.0, 0.0],\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.vertices);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexPosition,\n          );\n\n          gl.bindBuffer(gl.ARRAY_BUFFER, sceneBuffer.normals);\n          gl.vertexAttribPointer(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            0,\n          );\n          gl.enableVertexAttribArray(\n            shaderInfo.vertex.attributeLocations.vertexNormal,\n          );\n\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sceneBuffer.indices);\n\n          gl.useProgram(shaderProgram);\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.projectionMatrix,\n            false,\n            projectionMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.viewMatrix,\n            false,\n            viewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.modelMatrix,\n            false,\n            modelMatrix,\n          );\n\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightModelMatrix,\n            false,\n            lightModelMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightViewMatrix,\n            false,\n            lightViewMatrix,\n          );\n          gl.uniformMatrix4fv(\n            shaderInfo.vertex.uniformLocations.lightProjectionMatrix,\n            false,\n            lightProjectionMatrix,\n          );\n\n          gl.uniform2fv(\n            shaderInfo.fragment.uniformLocations.texelSize,\n            texelSize,\n          );\n          gl.uniform4fv(\n            shaderInfo.vertex.uniformLocations.lightPosition_worldSpace,\n            lightModelPosition,\n          );\n          gl.uniform3fv(\n            shaderInfo.vertex.uniformLocations.lightColor,\n            lightColor,\n          );\n          gl.uniform1f(\n            shaderInfo.vertex.uniformLocations.lightIntensity,\n            lightIntensity,\n          );\n\n          gl.uniform1f(\n            shaderInfo.fragment.uniformLocations.ambientFactor,\n            scene.ambientFactor,\n          );\n\n          gl.activeTexture(gl.TEXTURE0);\n          gl.bindTexture(gl.TEXTURE_2D, shadowMapSceneBuffer.shadowMapTexture);\n          gl.uniform1i(\n            shaderInfo.fragment.uniformLocations.shadowMapTextureSampler,\n            0,\n          );\n\n          gl.drawElements(\n            gl.TRIANGLES,\n            scene.indices.length,\n            gl.UNSIGNED_SHORT,\n            0,\n          );\n        });\n\n        requestAnimationFrame(renderScene);\n      };\n      requestAnimationFrame(renderScene);\n\n      return () => updateShouldRender(false);\n    }),\n    [sceneBuffer],\n  );\n\n  const colorCoords = { x: \"r\", y: \"g\", z: \"b\" };\n\n  return (\n    <div className=\"util text-center\" style={{ padding: \"1rem\" }}>\n      <canvas width=\"640\" height=\"480\" ref={canvasRef}>\n        Cannot run WebGL examples (not supported)\n      </canvas>\n      <pre className=\"util text-left\">\n        {`\nScene:\n    World Position: ${coordArrToString([0.0, 0.0, 0.0])}\n    Lighting:\n        Ambient Factor: ${scene.ambientFactor}\n`.trim()}\n      </pre>\n      <pre className=\"util text-left\">\n        {`\nLight:\n    World Position: ${coordArrToString(lightModelPosition)}\n    Color: ${coordArrToString(lightColor, colorCoords)}\n    Intensity: ${lightIntensity}\n`.trim()}\n      </pre>\n    </div>\n  );\n};\n\nexport default wrapExample(ShadowMappingSpotLightShadowExample);\n","import { Link } from \"gatsby\"\nimport React from \"react\"\n\nimport ShadowMappingAreaLightMapExample from \"../../components/advanced/shadow-mapping/area-light/map-example\"\nimport ShadowMappingAreaLightShadowExample from \"../../components/advanced/shadow-mapping/area-light/shadow-example\"\nimport { areaLightShadowFragmentShaderSource } from \"../../components/advanced/shadow-mapping/area-light/shadow-example-shaders\"\nimport ShadowMappingDirectionalLightMapExample from \"../../components/advanced/shadow-mapping/directional-light/map-example\"\nimport {\n  directionalLightMapFragmentShaderSource,\n  directionalLightMapVertexShaderSource,\n} from \"../../components/advanced/shadow-mapping/directional-light/map-example-shaders\"\nimport * as ShadowMappingDirectionalLightMapFixedExample from \"../../components/advanced/shadow-mapping/directional-light/map-fixed-example\"\nimport {\n  directionalLightMapFixedFragmentShaderSource,\n} from \"../../components/advanced/shadow-mapping/directional-light/map-fixed-example-shaders\"\nimport * as ShadowMappingFixedDirectionalLightPeterPanningExample from \"../../components/advanced/shadow-mapping/directional-light/peter-panning-example\"\nimport ShadowMappingDirectionalLightShadowAcneExample from \"../../components/advanced/shadow-mapping/directional-light/shadow-acne-example\"\nimport ShadowMappingDirectionalLightShadowExample from \"../../components/advanced/shadow-mapping/directional-light/shadow-example\"\nimport {\n  directionalLightShadowFragmentShaderSource,\n  directionalLightShadowVertexShaderSource,\n} from \"../../components/advanced/shadow-mapping/directional-light/shadow-example-shaders\"\nimport * as ShadowMappingFixedAltDirectionalLightShadowExample from \"../../components/advanced/shadow-mapping/directional-light/shadow-fixed-alt-example\"\nimport {\n  directionalLightShadowFixedAltFragmentShaderSource,\n} from \"../../components/advanced/shadow-mapping/directional-light/shadow-fixed-alt-example-shaders\"\nimport * as ShadowMappingFixedDirectionalLightShadowExample from \"../../components/advanced/shadow-mapping/directional-light/shadow-fixed-example\"\nimport {\n  directionalLightShadowFixedFragmentShaderSource,\n} from \"../../components/advanced/shadow-mapping/directional-light/shadow-fixed-example-shaders\"\nimport * as ShadowMappingFixedModelDirectionalLightShadowExample from \"../../components/advanced/shadow-mapping/directional-light/shadow-model-fixed-example\"\nimport * as ShadowMappingFixedModelDirectionalLightZoomedShadowExample from \"../../components/advanced/shadow-mapping/directional-light/shadow-model-fixed-zoomed-example\"\nimport ShadowMappingDirectionalLightPcfShadowExample from \"../../components/advanced/shadow-mapping/directional-light/shadow-pcf-example\"\nimport {\n  directionalLightShadowPcfFragmentShaderSource,\n} from \"../../components/advanced/shadow-mapping/directional-light/shadow-pcf-example-shaders\"\nimport * as ShadowMappingDirectionalLightPcfZoomedShadowExample from \"../../components/advanced/shadow-mapping/directional-light/shadow-pcf-zoomed-example\"\nimport ShadowMappingNoShadowExample from \"../../components/advanced/shadow-mapping/no-shadow/shadow-example\"\nimport ShadowMappingPointLightMapExample from \"../../components/advanced/shadow-mapping/point-light/map-example\"\nimport {\n  pointLightMapFragmentShaderSource,\n  pointLightMapVertexShaderSource,\n} from \"../../components/advanced/shadow-mapping/point-light/map-example-shaders\"\nimport ShadowMappingPointLightShadowExample from \"../../components/advanced/shadow-mapping/point-light/shadow-example\"\nimport { pointLightShadowFragmentShaderSource } from \"../../components/advanced/shadow-mapping/point-light/shadow-example-shaders\"\nimport ShadowMappingSpotLightMapExample from \"../../components/advanced/shadow-mapping/spot-light/map-example\"\nimport ShadowMappingSpotLightShadowExample from \"../../components/advanced/shadow-mapping/spot-light/shadow-example\"\nimport {\n  spotLightShadowFragmentShaderSource,\n  spotLightShadowVertexShaderSource,\n} from \"../../components/advanced/shadow-mapping/spot-light/shadow-example-shaders\"\nimport Content from \"../../components/content\"\nimport Equation from \"../../components/equation/equation\"\nimport GlslCodeHighlight from \"../../components/glsl-code-highlight\"\nimport Heading from \"../../components/heading\"\nimport Layout from \"../../components/layout\"\nimport PageChange from \"../../components/page-change\"\nimport Seo from \"../../components/seo\"\n\nconst ShadowMappingPage = ({ location: { pathname } }) => (\n  <Layout>\n    <Seo\n      pathname={pathname}\n      title=\"Shader Advanced - Shadow Mapping\"\n      description=\"A look into the how shadow maps can be generated and used to add dynamic shadows produced by objects in a scene.\"\n      keywords={[\n        \"shadow\",\n        \"mapping\",\n        \"texturing\",\n        \"shader\",\n        \"spot light\",\n        \"area light\",\n        \"point light\",\n        \"advanced\",\n      ]}\n    />\n    <Content>\n      <h1>Shader Advanced - Shadow Mapping</h1>\n      <p>\n        In the <Link to=\"/intermediates/lighting/\">lighting chapter</Link>,\n        we've learnt how to color an object based on the light falling on it,\n        and the various components that make up the lighting of an object.\n      </p>\n      <p>\n        However, we're still missing an important component of lighting an\n        object - the shadows that they create. While light can increase the\n        visibility of an object, it also allows an object to cast shadows on\n        other objects, reducing their visibility.\n      </p>\n      <p>\n        Without shadows being considered when shading an object based on the\n        sources of light in the world, the world will not look accurate.\n      </p>\n      <p>\n        Let's take a look at an example where we only have lighting in the\n        world, but no shadows being cast by objects.\n      </p>\n      <ShadowMappingNoShadowExample />\n      <p>\n        From the example, it becomes apparent why the lighting looks very odd.\n      </p>\n      <p>\n        If each object in the scene is looked at individually, the lighting on\n        them looks accurate, with how much each part is lit based on where they\n        are respective to the light. However, since the objects aren't casting a\n        shadow on each other, the scene feels incomplete.\n      </p>\n      <p>\n        Depending on the type of light being used, the shadows they cast, and\n        the techniques used to create them can differ slightly. Let's go through\n        various types of lights that one may add to their scene and see how\n        shadow mapping is done for each of them.\n      </p>\n      <Heading type=\"h2\">Directional light</Heading>\n      <p>\n        Directional lights represent a light where the rays all travel in the\n        same direction and don't have their intensity decrease with increase in\n        distance.\n      </p>\n      <p>\n        Directional lights are typically to light up areas uniformly with no\n        reduction in light intensity, like light from the Sun.\n      </p>\n      <p>\n        Directional lights are a very good representation of lighting by then\n        Sun because the Sun is far enough for the rays of light being emitted by\n        it being effectively parallel, and the intensity of the light always\n        being uniform across an entire scene.\n      </p>\n      <p>\n        The first step for creating shadows is to determine what parts of the\n        scene are visible to the light source and which parts are not.\n      </p>\n      <p>\n        Since any part of a scene that is visible to the light would have rays\n        from it fall on it, any parts that are not visible from the perspective\n        of the light should not be lit by it, as they would be blocked by the\n        visible parts of the scene.\n      </p>\n      <p>\n        If we position the camera to be in the same position and facing the same\n        direction as the light source, we can capture which parts of the scene\n        are visible under the light source. This can allow us to determine which\n        parts of the scenen are visible and not visible from the perspective of\n        the light.\n      </p>\n      <p>\n        To go about doing this, we create a texture that we will render the\n        scene to from the perspective of the light source, where we capture the\n        depth of each object visible to the light source in the scene (how far\n        away the object is from the light source).\n      </p>\n      <p>\n        This image that is rendered to the texture is called a depth map,\n        because it is an image map that shows the depth of various parts of the\n        scene that are visible to the camera.\n      </p>\n      <p>\n        However, the depth map we've rendered is specially called a shadow map,\n        because it determines which parts of the scene are visible to the light\n        source, and hence can also be used to determine which parts are not\n        visible to the light source and are hence in shadow.\n      </p>\n      <p>\n        Do note that since we're only recording a single value (the depth),\n        shadow maps are grayscale as a result.\n      </p>\n      <p>\n        Let's look at an example for creating a shadow map for a directional\n        light.\n      </p>\n      <Heading type=\"h3\">Rendering a shadow map</Heading>\n      <p>\n        Rendering a shadow map is very simple. We just need to adjust our view\n        and projection matrices to match how the light source would view the\n        world.\n      </p>\n      <ul>\n        <li>\n          The view matrix is updated to change the camera position and direction\n          to be the same as that of the light source.\n        </li>\n        <li>\n          The projection matrix is updated to reflect how the light source views\n          the world. For the case of directional lights, since they generate\n          light rays that travel in parallel, an orthogonal projection would\n          best fit it.\n        </li>\n      </ul>\n      <p>\n        Note that the camera would have to positioned and projected using the\n        view and projection matrices in such a way that the area that is\n        supposed to be lit by the light source is rendered into the shadow map.\n        This may require some testing to figure out correctly.\n      </p>\n      <p>\n        Once the camera is placed correctly, the rest of the process is very\n        simple - render the scene into the texture, with the fragment shader\n        returning the depth of the fragment it is rendering as the color of that\n        fragment.\n      </p>\n      <ShadowMappingDirectionalLightMapExample />\n      <GlslCodeHighlight\n        code={directionalLightMapVertexShaderSource}\n        type=\"Shadow Map Vertex\"\n      />\n      <GlslCodeHighlight\n        code={directionalLightMapFragmentShaderSource}\n        type=\"Shadow Map Fragment\"\n      />\n      <p>\n        Looking at the example above, we can see that the vertex shader is\n        extremely simple and something we've already seen before in previous\n        chapters. We just position the vertex using the model-view-projection\n        matrix, with the view-projection matrix based on the light source.\n      </p>\n      <p>\n        In the fragment shader, we need to return the depth of the fragment\n        being rendered to be stored in the texture. Since it's just a single\n        value, we can return it as a simple grayscale color value.\n      </p>\n      <p>\n        In order to determine the depth of the fragment from the light source,\n        we can calculate the depths of each vertex and pass that to the fragment\n        shader, letting the GPU interpolate that into the depth value for the\n        fragment.\n      </p>\n      <p>\n        However, the GPU already provides us with the position of the fragment\n        w.r.t. the camera's origin (which is in the same position as the light\n        source). In OpenGL/WebGL, this value is available through the{\" \"}\n        <code>gl_FragCoord</code> variable, with the <code>gl_FragCoord.z</code>{\" \"}\n        telling us the depth of the fragment.\n      </p>\n      <p>\n        If the shader language you're using doesn't provide this data already,\n        as mentioned before you can just calculate the depth of each vertex and\n        pass that to the fragment shader, letting the GPU interpolate the depth\n        value for each fragment as a result.\n      </p>\n      <p>\n        With the depth of the fragment known, the fragment color is set to the\n        same value, and the final shadow map is saved to a texture. This lets us\n        use it in the next step for drawing the shadows as part of the main\n        render.\n      </p>\n      <p>\n        Next, let's look at how we use the shadow map when rendering the actual\n        scene.\n      </p>\n      <Heading type=\"h3\">Utilizing the shadow map</Heading>\n      <p>\n        With the shadow map generated, now we need to use it during the main\n        render of the scene.\n      </p>\n      <p>\n        The shadow map contains the depth of all the parts of the scene that are\n        visible to the light source, with the map being rendered from the light\n        sources' perspective.\n      </p>\n      <p>\n        When performing the final render of the scene in the fragment shader, we\n        can calculate the position of the fragment being rendered relative to\n        the light source to get the depth of the fragment that was closest and\n        visible to it.\n      </p>\n      <p>\n        Using this value, we can then check if the depth of the current fragment\n        from the light source is less than or equal to the depth of the fragment\n        in the shadow map.\n      </p>\n      <p>\n        If it is, that means the current fragment has to be visible to the light\n        source and should be lit by it. If not, that means the current fragment\n        is covered by another fragment from the view of the light source, and\n        hence is in shadow.\n      </p>\n      <p>Let's look at how this would be implemented in the shader.</p>\n      <ShadowMappingDirectionalLightShadowExample />\n      <GlslCodeHighlight\n        code={directionalLightShadowVertexShaderSource}\n        type=\"Final Scene Vertex\"\n      />\n      <GlslCodeHighlight\n        code={directionalLightShadowFragmentShaderSource}\n        type=\"Final Scene Fragment\"\n      />\n      <p>\n        The vertex shader now calculates two additional values that are\n        forwarded to the fragment shader - the position of the fragment relative\n        to the light source (which is passed as{\" \"}\n        <code>vertexPositionFromLight</code>), and the direction of the light\n        from the light source in view-space (which is passed as{\" \"}\n        <code>lightDirection_viewSpace</code>).\n      </p>\n      <p>\n        Note that since we're not using normal maps, the vertex shader looks\n        like the one we've learn about in the{\" \"}\n        <Link to=\"/intermediates/lighting/\">lighting</Link> chapter.\n      </p>\n      <p>\n        In the fragment shader is where the shadow map is utilized. We first\n        need to calculate what the depth of the current fragment is relative to\n        the light source, which can be done using the{\" \"}\n        <code>vertexPositionFromLight</code> value provided by the vertex\n        shader.\n      </p>\n      <p>\n        The coordinates provided by the vertex shader first need to be corrected\n        for perspective-division and adjusting the range of the value.\n      </p>\n      <p>\n        When we set the position of the vertex in the vertex shader using the{\" \"}\n        <code>gl_Position</code> variable, the GPU performs some additional\n        operations on the position value to transform it from clip-space to\n        screen-space. This operation is a perspective-division operation.\n      </p>\n      <p>\n        The reason for this is that the clip-space coordinates the vertex shader\n        calculates are still coordinates that represent the point in 3D space.\n        However, the screens we render to are a 2D plane. This means that the\n        coordinates need to be adjusted to transform them from the 3D space into\n        the 2D plane while correcting for the perspective the vertex is shown\n        in.\n      </p>\n      <p>\n        This operation is done by GPUs automatically when the clip-space\n        coordinates are provided through the <code>gl_Position</code> variable.\n        But if we're passing any clip-space coordinate from the vertex to the\n        fragment shader (in our case, the clip-space coordinates of the vertex\n        relative to the light source), it will interpolate the clip-space\n        coordinates for that fragment correctly, but it won't perform the\n        perspective-division correction.\n      </p>\n      <p>\n        The shadow map we rendered is also in screen-space, not clip-space, so\n        we cannot use the clip-space coordinates of the fragment directly.\n        Instead, we would also need to perform the same correction that the GPU\n        does for the vertex position automatically to get the screen-space\n        coordinates of the fragment relative to the light source.\n      </p>\n      <p>\n        The second step is to adjust the range we get from the resulting\n        screen-space coordinates to be in the same range as the values from the\n        shadow map.\n      </p>\n      <p>\n        The range of the screen-space coordinates is from{\" \"}\n        <Equation text={`(-1, -1, -1)`} /> to <Equation text={`(1, 1, 1)`} />.\n        However, the range of the depth values in the shadow map are from{\" \"}\n        <Equation text={`(0, 0, 0)`} /> to <Equation text={`(1, 1, 1)`} />.\n      </p>\n      <p>\n        If we divide the screen-space coordinates of our current fragment by 2,\n        the range gets transformed to <Equation text={`(-0.5, -0.5, -0.5)`} /> -{\" \"}\n        <Equation text={`(0.5, 0.5, 0.5)`} />. We can then add{\" \"}\n        <Equation text={`0.5`} /> to the coordinates to get them into the range\n        of <Equation text={`(0, 0, 0)`} /> to <Equation text={`(1, 1, 1)`} />,\n        which now matches the range of depth values from the shadow map, as well\n        as the range of texel values of the shadow map texture (which ranges\n        from <Equation text={`(0, 0)`} /> to <Equation text={`(1, 1)`} />\n        ).\n      </p>\n      <p>\n        This is what is done in line 25 in the fragment shader. The{\" \"}\n        <code>xyz</code> coordinates are divided by the <code>w</code>{\" \"}\n        coordinate of the fragment to perform the perspective division\n        correction of the coordinates.\n      </p>\n      <p>\n        The <code>w</code> coordinate determines how much the coordinate needs\n        to be adjusted by based on how the vertex is projected onto the screen,\n        and dividing the coordinates by the value transforms the coordinates\n        into screen-space based on the perspective of the projection matrix\n        (orthogonal or 3D perspective).\n      </p>\n      <p>\n        The result is then multiplied by <code>0.5</code> to divide the\n        coordinates by <code>2</code>, and then <code>0.5</code> is added to\n        transform the coordinates into the right range.\n      </p>\n      <p>\n        Once done, the transformed coordinates (hereby referred to as shadow map\n        coordinates) can now be used with the shadow map to check if the current\n        fragment is visible to the light source or not.\n      </p>\n      <p>\n        The <code>xy</code> coordinates of the shadow map coordinates are used\n        to sample the depth of the fragment closest to the light source at the\n        position the current fragment is from the shadow map. This is done on\n        line 26.\n      </p>\n      <p>\n        This depth value can then be compared against the <code>z</code>{\" \"}\n        coordinate of the shadow map coordinates representing the depth value of\n        the current fragment. If the depth value of the current fragment is\n        greater than the depth value sampled from the shadow map, then the\n        current fragment is in shadow and it's visibility is set to{\" \"}\n        <code>0</code>. Otherwise, the fragment is lit by the light source and\n        it's visibility is set to <code>1</code>. This is done on line 29.\n      </p>\n      <p>\n        The fragment visibility factor is then applied on the diffuse and\n        specular lighting components that the light source contributes to, to\n        apply the lighting only if the fragment is visible to the light source.\n        In our case, we only have diffuse lighting, so it's only applied to\n        that.\n      </p>\n      <p>\n        While we do see the shadows are being rendered, there are some bad\n        artifacts that are also being rendered into the scene. Let's explore the\n        common artifacts you would face when rendering shadows and how to\n        overcome each of them.\n      </p>\n      <Heading type=\"h3\">Shadow acne</Heading>\n      <p>\n        The most obvious artifact present is the dark shadow stripes in the\n        scene. This shadow artifact is called \"shadow acne\". This artifact is\n        caused by the imprecision from generating the shadow map. We can look at\n        it more closely here:\n      </p>\n      <ShadowMappingDirectionalLightShadowAcneExample />\n      <p>\n        Shadow acne occurs due how the shadow map is rendered, with two main\n        causes:\n      </p>\n      <Heading type=\"h4\">1. Shadow map resolution</Heading>\n      <p>\n        The shadow map can only contain as much detail as is allowed by its\n        resolution.\n      </p>\n      <p>\n        If a fragment exists in the final rendered scene but not in the shadow\n        map, and if the depth of the fragment it sampled from the map happened\n        to be lower than it, then it will be incorrectly rendered to be in\n        shadow even when it is visible to the light source.\n      </p>\n      <p>\n        This can be solved by increasing the resolution of the shadow to ensure\n        as much detail of the scene from the perspective of the light source is\n        captured.\n      </p>\n      <p>\n        However, increasing the resolution of the shadow map also means that\n        you're taxing the GPU more to render it as well, which is not ideal,\n        especially for real-time performance scenarios.\n      </p>\n      <p>\n        This solution will also never fully fix shadow acne, which is the second\n        (and primary) cause for shadow acne.\n      </p>\n      <Heading type=\"h4\">2. Precision per pixel of shadow map</Heading>\n      <p>\n        Each pixel in the shadow map is also limited by the number of bits used\n        to store them. If we are storing high precision values in a low\n        precision format, that loss of information can introduce errors result\n        in fragments being rendered to be in shadow even if they are visible to\n        the light soruce.\n      </p>\n      <p>\n        If we store the shadow map as a typical 32-bit color map, then each\n        pixel can store 32 bits of information.\n      </p>\n      <p>\n        In our case, we were storing the entire depth value in each RGBA\n        component of the shadow map separately. Since each color would have\n        8-bits of information, we were effectively storing the depth of the\n        fragment as an 8-bit value, when it's originally a 32-bit float.\n      </p>\n      <p>\n        Since we are converting a 32-bit value to 8 bits, we have lost a lot of\n        precision. As a result when rendering the final scene and comparing the\n        depth of the fragment to the stored value in, the inaccuracy of the\n        depth of the stored fragment can result in some fragments being\n        considered to be in shadow, even if they actually aren't.\n      </p>\n      <p>We could fix this in a few ways.</p>\n      <Heading type=\"h5\">\n        i. Better fit the depth value into the resultant pixel\n      </Heading>\n      <p>\n        We could fix this in a few ways. Since we have a 32-bit float, instead\n        of storing it in an 8-bit format in each component of the RGBA value, we\n        can split the 32 bits into four 8 bit chunks, and store those as the\n        final RGBA values instead.\n      </p>\n      <p>\n        This allows us to fully utlize the entire 32-bit range of the pixel data\n        without losing any precision, and making comparisons accurate.\n      </p>\n      <p>\n        However, it may not always be possible to store the depth value at full\n        precision. In such cases, we can make sure we utilize as much of the\n        data value range as we possibly can to reduce shadow acne to a certain\n        degree.\n      </p>\n      <p>\n        How does one utilize the full range of values possible to store in a\n        pixel? We know that the depth coordinate we're storing is a homogenous\n        coordinate (where the value is between 0 and 1), with 0 representing\n        being at the near plane of the light source's \"camera\", and 1\n        representing being at the far plane of the light source's \"camera\".\n      </p>\n      <p>\n        If we adjust this near and far plane such that the entire scene that we\n        want to render into the shadow map just barely fits within those planes,\n        then the depth values that will be stored in the shadow map will be more\n        widely spread across that range, improving accuracy and reducing shadow\n        acne.\n      </p>\n      <p>\n        We can see these two approaches implemented in the shadow map and final\n        rendered scene below:\n      </p>\n      <ShadowMappingDirectionalLightMapFixedExample.default />\n      <ShadowMappingFixedAltDirectionalLightShadowExample.default />\n      <GlslCodeHighlight\n        code={directionalLightMapFixedFragmentShaderSource}\n        type=\"Shadow Map Fragment\"\n      />\n      <GlslCodeHighlight\n        code={directionalLightShadowFixedAltFragmentShaderSource}\n        type=\"Final Scene Fragment\"\n      />\n      <p>\n        We can see from the above results that by splitting the depth value into\n        chunks to be stored across the entire RGBA fragment color value, and by\n        adjusting our near and far planes to stretch the scene across the entire\n        depth range we've fixed our shadow acne issue.\n      </p>\n      <p>\n        For our case this was possible because our depth value (which is 32\n        bits) was possible to store without losing any precision as an RGBA\n        color value.\n      </p>\n      <p>\n        However, it may be more common to not be able to store these values in\n        full precision in the shadow map, as a result there will always be some\n        amount of shadow acne generated in the final scene.\n      </p>\n      <p>\n        To completely remove the issue of shadow acne, we can follow the next\n        solution.\n      </p>\n      <Heading type=\"h5\">ii. Use a bias value</Heading>\n      <p>\n        The best (and most common) approach to removing shadow approach is to\n        introduce a bias value to the comparison called an acne bias/depth bias.\n      </p>\n      <p>\n        The bias value allows you to set a threshold for how close the depth of\n        the current fragment in the final scene has to be compared to the depth\n        value read from the shadow map.\n      </p>\n      <p>\n        If the difference in distance is within the threshold defined by the\n        bias value, then the fragment is considered to be visible to the light\n        source and lit accordingly.\n      </p>\n      <p>We can see this solution in action below:</p>\n      <ShadowMappingFixedDirectionalLightShadowExample.default />\n      <GlslCodeHighlight\n        code={directionalLightShadowFixedFragmentShaderSource}\n        type=\"Final Scene Fragment\"\n      />\n      <p>\n        From the result, we can see that by introducing the acne bias value (in\n        line 28) and using it as part of the depth comparison (in line 30), we\n        were able to remove the shadow acne completely.\n      </p>\n      <p>\n        However, this solution does introduce a new problem that we will look at\n        in the next section.\n      </p>\n      <Heading type=\"h5\">\n        iii. Move the shadow acne to parts already in shadow\n      </Heading>\n      <p>\n        There is one more approach that could be taken with \"fixing\" the shadow\n        acne, which is to make sure it only occurs in the areas of the scene\n        under shadow.\n      </p>\n      <p>\n        Traditionally when rendering a scene, we have the GPU cull the back\n        faces of the object that are not facing towards the camera. This saves\n        on time that would otherwise be spent rendering faces that are hidden\n        from us.\n      </p>\n      <p>\n        The shadow acne problem we're facing is occuring on the faces that we\n        render in the shadow map, the ones that are visible to the light source.\n      </p>\n      <p>\n        If we instead render the back faces of the objects in the shadow map,\n        and cull the front faces, now the shadow acne problem will only occur on\n        the faces of the objects that are not visible to the light, and hence\n        should be in shadow.\n      </p>\n      <p>\n        Since those faces would not be lit anyways, the shadow acne problem\n        should not affect the scene in any way.\n      </p>\n      <p>\n        However, this solution doesn't work always. If you're scene has very\n        thin geometry, where the front and back faces are basically at the same\n        depth (considering the imprecision in the shadow map), or parts of the\n        scene are touching/connected to each other within the imprecision margin\n        of the shadow map, then shadows may appear to \"hover\" slightly.\n      </p>\n      <p>\n        For this reason, you may need to evaluate on a per light basis on\n        whether using front-culling in the shadow map is possible or not.\n      </p>\n      <p>\n        Now let's look at the second problem we're facing from using the acne\n        bias solution.\n      </p>\n      <Heading type=\"h3\">Peter-panning</Heading>\n      <p>\n        Looking at the final rendered scene using the acne bias solution, we can\n        clearly see that the shadow projected by the wall is \"hovering\".\n      </p>\n      <ShadowMappingFixedDirectionalLightPeterPanningExample.default />\n      <p>\n        This \"hovering\" is called \"Peter-Panning\", being named after the\n        fictional character Peter Pan and his ability to fly.\n      </p>\n      <p>\n        This problem does occur with the other solutions as well. You can spot\n        the shadow in the first solution to the shadow acne problem hovering\n        slightly on the edge, and we mentioned that this occurs in the third\n        solution as well.\n      </p>\n      <p>\n        The solution to shadow peter-panning is to update the scene to make the\n        geometry thicker. This will push the rendered fragments in the shadow\n        map close enough to the light source to counter the peter-panning effect\n        introduced by the acne-bias/imprecision from the shadow map.\n      </p>\n      <ShadowMappingFixedModelDirectionalLightShadowExample.default />\n      <p>\n        You can see from the above example that by making the floor and walls\n        thicker the peter-panning problem now no longer exists\n      </p>\n      <p>\n        When using the third solution for the shadow acne problem, this won't\n        fix the issue because we're rendering the faces that are not visible to\n        the light source. So no matter how thick we make the geometry, the\n        resultant shadow map will still be the same in the areas where\n        peter-panning occurs.\n      </p>\n      <p>\n        However, when using the other two solutions for the shadow acne problem,\n        this fix should work well.\n      </p>\n      <p>\n        Now let's further zoom into the edges of the shadow to find another\n        problem.\n      </p>\n      <Heading type=\"h3\">Shadow aliasing</Heading>\n      <p>\n        If we zoom in to the edges of the shadow we can spot another problem -\n        aliasing.\n      </p>\n      <ShadowMappingFixedModelDirectionalLightZoomedShadowExample.default />\n      <p>\n        This problem is caused mainly by the resolution of the shadow map. We\n        can increase the resolution to reduce the amount of aliasing, but this\n        will not completely remove the aliasing artifacts from the shadows.\n      </p>\n      <Heading type=\"h3\">Percentage-Closer Filtering (PCF)</Heading>\n      <p>\n        Instead of increasing the shadow map resolution, we can implement a form\n        of anti-aliasing calculation when determining whether a fragment is in\n        shadow or not to blur the edges of the shadow and smoothen it to a\n        certain degree.\n      </p>\n      <p>\n        This can be done by checking whether the current fragment is close to\n        the edge of the shadow within a certain range. If it is, then it is set\n        to be partially in shadow proportional to its distance from the shadow\n        edge, and then rendered accordingly.\n      </p>\n      <p>\n        This sort of anti-aliasing algorithm where we're shading the fragment to\n        be in shadow based on how close it is to the shadow edge is called\n        Percentage-Closer Filtering.\n      </p>\n      <p>\n        There are a wide variety of PCF algorithms that can be used to smoothen\n        the edges of shadows, or make it more appealing or realistic. However,\n        for our example we'll go with a simple PCF algorithm.\n      </p>\n      <ShadowMappingDirectionalLightPcfShadowExample />\n      <ShadowMappingDirectionalLightPcfZoomedShadowExample.default />\n      <GlslCodeHighlight\n        code={directionalLightShadowPcfFragmentShaderSource}\n        type=\"Final Scene Fragment\"\n      />\n      <p>\n        Previously we were setting the <code>fragmentVisibility</code> value to\n        either <code>0</code> or <code>1</code> based on if its depth was lower\n        than the depth recorded in the shadow map.\n      </p>\n      <p>\n        However, this time we'll be calculating an \"average\" visibility value\n        for the fragment using a PCF algorithm, so we've created a function{\" \"}\n        <code>getAverageVisibility</code> to calculate this value on line 22.\n      </p>\n      <p>\n        Normally we just sample the shadow map depth value at the coordinate the\n        current fragment is supposed to be located at.\n      </p>\n      <p>\n        As part of our PCF algorithm, we will also be sampling the depth value\n        at various coordinates surrounding the coordinate where our current\n        fragment is located.\n      </p>\n      <p>\n        We iterate through the shadow map coordinates using two nested loops on\n        line 24 and 25, getting the depth values of all fragments that are at\n        most 2 units away from the position of the current fragment in both the\n        X and Y coordinates.\n      </p>\n      <p>\n        We then compare all of them to the depth of the current fragment and sum\n        the visibilities based on the comparison results.\n      </p>\n      <p>\n        This is then divided by the number of samples taken in total, thereby\n        giving us the average visibility of the fragment across all shadow map\n        samples taken.\n      </p>\n      <p>\n        This results in the shadow softening near the edge as the average\n        visibility slowly reduces till the fragments are far enough away from\n        the shadow edge.\n      </p>\n      <p>\n        This can be seen in the end result, with the shadow in the main view\n        having the \"stair-case\" effect caused by the aliasing being reduced, and\n        the shadow edge looking blurrier compared to before in the zoomed\n        example.\n      </p>\n      <p>\n        As said before, there are a wide variety of PCF algorithms that can be\n        used to soften shadow edges and reduce the aliasing effect. They all\n        have their benefits and drawbacks based on performance and appearance.\n      </p>\n      <p>\n        We've showcased a very simple PCF algorithm to show how it's\n        implemented, and recommend exploring other PCF algorithms and see how\n        the behave.\n      </p>\n      <p>\n        This covers how to render shadows for directional lights, and also a\n        look into the various issues that crop up when rendering shadows and how\n        to solve them.\n      </p>\n      <p>\n        Next lets look at how to render shadows for some other types of lights,\n        and implementing the same solutions we've learnt here for solving the\n        problems we face when rendering shadows.\n      </p>\n      <p>\n        With the other lights we'll be looking at, they are considered to be a\n        finite distance away, and so follow the typical lighting calculations we\n        were using in the{\" \"}\n        <Link to=\"/intermediates/lighting/\">lighting chapter</Link> (with\n        intensity of the light reducing with distance).\n      </p>\n      <Heading type=\"h2\">Spot light</Heading>\n      <p>\n        Spot lights represent the typical light sources we see. The light\n        originates from a single point, covering a certain area of the scene,\n        and is considered to be a normal light source (considered to be a finite\n        distance away with intensity dropping with increase in distance).\n      </p>\n      <p>\n        Since the light from spot light originates from a single point, with the\n        rays not being parallel, they more accurately represent traditional\n        lights we see, such as bulbs, street lights, lamps, etc.\n      </p>\n      <p>\n        The approach for generating shadows for spot lights is similar to\n        directional lights, with the main differences being:\n      </p>\n      <ul>\n        <li>\n          The lighting calculation now does consider intensity reduction with\n          increase in distance, as is generally done (unlike with directional\n          lights).\n        </li>\n        <li>\n          The projection matrix used for the light's point of view is a 3D\n          perspective matrix instead of an orthogonal one (which was used for\n          the directional light).\n        </li>\n      </ul>\n      <p>\n        The reason for using a 3D perspective matrix for the projection matrix\n        instead of an orthogonal one is because the orthogonal projection for\n        the shadow map would work if the rays of light are travelling in\n        parallel.\n      </p>\n      <p>\n        However, in the case of spot lights, the rays are not travelling in\n        parallel. They instead project from a single point and extend in various\n        directions, with the rays generally following the same direction as the\n        light source is facing.\n      </p>\n      <p>\n        A 3D perspective projection is the one that would accurately reflect\n        this in the shadow map, hence why it is used for generating the spot\n        light's shadow map.\n      </p>\n      <p>\n        Let's look at how the shadow map and the final scene look under a spot\n        light.\n      </p>\n      <ShadowMappingSpotLightMapExample />\n      <ShadowMappingSpotLightShadowExample />\n      <GlslCodeHighlight\n        code={spotLightShadowVertexShaderSource}\n        type=\"Final Scene Vertex\"\n      />\n      <GlslCodeHighlight\n        code={spotLightShadowFragmentShaderSource}\n        type=\"Final Scene Fragment\"\n      />\n      <p>\n        We can see that switching to the 3D perspective projection matrix has\n        changed the way the shadow map has rendered. The code for rendering the\n        shadow map itself is the same as before, with the only change being the\n        projection matrix that is passed to it.\n      </p>\n      <p>\n        The shader for rendering the final scene is also practically the same as\n        well, with the only difference being the <code>getDiffuseLighting</code>\n        , which uses the same way we calculated diffuse lighting in the{\" \"}\n        <Link to=\"/intermediates/lighting/\">lighting chapter</Link>.\n      </p>\n      <Heading type=\"h2\">Area light</Heading>\n      <p>\n        Area lights are similar to directional lights, with the only distance\n        being that they are considered to be a finite distance away, and the\n        intensity of their light does reduce with increase in distance.\n      </p>\n      <p>\n        These lights are for representing flat plane lights that only light up\n        the area that they directly face, rather than traditional lights which\n        spot lights are better for.\n      </p>\n      <p>\n        Let's look at how the shadow map and the final scene look under an area\n        light.\n      </p>\n      <ShadowMappingAreaLightMapExample />\n      <ShadowMappingAreaLightShadowExample />\n      <GlslCodeHighlight\n        code={areaLightShadowFragmentShaderSource}\n        type=\"Final Scene Fragment\"\n      />\n      <p>\n        The shadow map is rendered exactly the same way as with directional\n        lights, so they will look exactly the same as well. When it comes to\n        rendering the final scene, the main difference compared to spot lights\n        is how the distance is calculated from the light source.\n      </p>\n      <p>\n        With spot lights, the rays originate from a single point. So when\n        calculating the distance of the fragment from the light source, we just\n        need to calculate the distance between two points.\n      </p>\n      <p>\n        With area lights, however, the rays of light don't originate from a\n        single point, but instead from a plane, with all rays being parallel to\n        each other.\n      </p>\n      <p>\n        However, the only information we have about the light source is a single\n        point on the plane (which we can consider to be the center of the\n        plane), and the direction the plane is facing.\n      </p>\n      <p>\n        In order to calculate the distance of the current fragment from the\n        light source, we need to find the point on the light plane whose ray is\n        travelling in the direction of the light source towards the fragment,\n        and then calculate the distance between that point and the fragment.\n        This would also be the shortest distance of the fragment from the plane.\n      </p>\n      <p>\n        Luckily, there is a way to describe a plane when given a point on the\n        plane and the direction the plane is facing (also called the normal of\n        the plane). The equation that describes a plane using these two\n        parameters is called the Point-Normal Form (PNF) of a plane. You can\n        learn more about this{\" \"}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://www.khanacademy.org/math/linear-algebra/vectors-and-spaces/dot-cross-products/v/defining-a-plane-in-r3-with-a-point-and-normal-vector\"\n        >\n          here\n        </a>\n        .\n      </p>\n      <p>\n        In order to conveniently calculate the distance of a point, the equation\n        of the plane needs to be converted from PNF to an equation called the\n        Hessian-Normal Form (HNF) of the plane. Once this conversion is made,\n        then calculating the distance of a point from the plane is very simple.\n        You can learn more about this{\" \"}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://mathworld.wolfram.com/HessianNormalForm.html\"\n        >\n          here\n        </a>\n        .\n      </p>\n      <p>\n        This calculation is done in the <code>getDistanceFromLight</code>{\" \"}\n        function at line 28 in the final scene fragment shader.\n      </p>\n      <p>\n        The standard equation for representing a plane is{\" \"}\n        <Equation text={`ax + by + cz + d = 0`} />. If you know a point on the\n        plane <Equation text={`P = (x_0, y_0, z_0)`} />, and the normal of the\n        plane <Equation text={`hat N = (n_x, n_y, n_z)`} />, you can calculate\n        the equation of the plane using the PNF equation{\" \"}\n        <Equation\n          text={`n_x(x - x_0) + n_y(y - y_0) + n_z(z - z_0) = 0 => n_xx + n_yy + n_zz + (- n_x x_0 - n_y y_0 - n_z z_0) = 0 `}\n        />\n        , where{\" \"}\n        <Equation\n          text={`a = n_x , b = n_y , c = n_z , d = - n_x x_0 - n_y y_0 - n_z z_0`}\n        />\n        .\n      </p>\n      <p>\n        This can then be converted to the HNF form of the plane using the\n        formula <Equation text={`hat N cdot x = - p`} />, where{\" \"}\n        <Equation text={`x`} /> is a point, and{\" \"}\n        <Equation\n          text={`p = d / sqrt (a^2 + b^2 + c^2) = (- n_x x_0 - n_y y_0 - n_z z_0) / sqrt (n_x^2 + n_y^2 + n_z^2) = (- n_x x_0 - n_y y_0 - n_z z_0) / norm(hat N)`}\n        />\n        . <Equation text={`p`} /> can be considered as the shortest distance of\n        the plane from the origin.\n      </p>\n      <p>\n        Once done, then the distance between the plane and a point{\" \"}\n        <Equation text={`x = (x_1, y_2, z_2)`} /> can be calculated using the\n        formula <Equation text={`D = hat n cdot x + p`} />\n      </p>\n      <p>\n        In line 29 we first calculate the normalized form of the normal of the\n        light plane. With this normal, we calculate <Equation text={`p`} /> (the\n        distance of the plane from the origin) in line 30 - 33 using the formula\n        we derived above.\n      </p>\n      <p>\n        And finally, we calculate the distance of the fragment from the plane by\n        calculating the dot vector between the normal of the plane and the\n        position of the fragment, and then adding the distance of the plane from\n        the origin.\n      </p>\n      <p>\n        This distance formula is then used as part of the diffuse lighting\n        calculation as normal.\n      </p>\n      <p>\n        Using this specific way of calculating the distance of the fragment from\n        the light source can be ignored, with the standard method being used, if\n        the inaccuracy from calculating the distance using the standard method\n        compared to the accurate way is within a margin of error you set. This\n        would help with improving the performance of the shader as well.\n      </p>\n      <Heading type=\"h2\">Point light</Heading>\n      <p>\n        Point lights are a special type of spot light. While spot light only\n        lights up an area in a general direction, point lights radiate light in\n        all directions.\n      </p>\n      <p>\n        So far, we've been storing the shadow map as a simple 2D texture, as all\n        the lights we've seen so far point in a single general direction.\n      </p>\n      <p>\n        However, with point lights, we need to capture the scene across all 6\n        axis directions (+X, -X, +Y, -Y, +Z, -Z). For this, we would need to use\n        6 textures to capture each direction.\n      </p>\n      <p>\n        There is special kind of texture that GPUs support that fit these kinds\n        of use cases. They are called cube map textures. These textures\n        represent faces of a cube, with each face representing a direction along\n        an axis, with each face being its own 2D texture.\n      </p>\n      <p>\n        To read a value from a cube map, you provide a direction from the origin\n        of the cube map to read the value stored in the cube map in that\n        direction.\n      </p>\n      <p>\n        We'll learn more about cube maps and some ways to use them in the{\" \"}\n        <Link to=\"/advanced/cube-maps/\">next chapter</Link>.\n      </p>\n      <p>\n        We can use a cube map to store all 6 directions of the shadow map\n        generated by a point light, and then read from this shadow cube map by\n        calculating the direction from the light source to the fragment, and\n        then read from the cube map in that direction.\n      </p>\n      <p>\n        When rendering the shadow cube map, we create view matrices for each\n        axis direction of the point light, and then render each face with those\n        view matrices.\n      </p>\n      <p>\n        Each face of the shadow cube map is rendered through separate render\n        passes in our examples, but with certain languages/frameworks it is\n        possible to render all six faces under one render pass.\n      </p>\n      <p>\n        However, due to WebGL not supporting this behavior, and also for the\n        sake of simplicity, we'll be sticking with showing shaders for rendering\n        a single face at a time.\n      </p>\n      <p>\n        Now let's look at how the shadow cube map of a point light is rendered\n        to capture the scene in all directions.\n      </p>\n      <ShadowMappingPointLightMapExample />\n      <GlslCodeHighlight\n        code={pointLightMapVertexShaderSource}\n        type=\"Shadow Map Vertex\"\n      />\n      <GlslCodeHighlight\n        code={pointLightMapFragmentShaderSource}\n        type=\"Shadow Map Fragment\"\n      />\n      <p>\n        For rendering previous shadow maps, we took the depth of the fragment\n        from <code>gl_FragCoord.z</code> and saved that in the shadow map.\n        However, for point light shadow maps, we can't use this value, and need\n        to store our own calculated depth value instead.\n      </p>\n      <p>\n        To do this, we calculate the distance between the light and the\n        fragment, and then divide that distance by the far plane of the light's\n        \"camera\", so that the distance is normalized to be between 0 and 1. This\n        is the final depth value we store in the shadow cube map.\n      </p>\n      <p>\n        To calculate this depth value, we pass the vertex position from the\n        vertex shader to the fragment shader, allowing the GPU to interpolate\n        the position for each fragment as a result, and get the position of the\n        light and the far plane of the light's camera. using a uniform variable.\n      </p>\n      <p>\n        Next let's look at how we use these recorded depth values when rendering\n        the final scene.\n      </p>\n      <ShadowMappingPointLightShadowExample />\n      <GlslCodeHighlight\n        code={pointLightShadowFragmentShaderSource}\n        type=\"Final Scene Fragment\"\n      />\n      <p>\n        As discussed previously, to read the recorded depth value from the\n        shadow cube map, we need to calculate the direction of the current\n        fragment from the light source. This direction vector is then used as a\n        coordinate to read from the cube map.\n      </p>\n      <p>\n        To compare against the depth of the current fragment, we calculate the\n        current fragment's depth by using the same formula we used in the shadow\n        map fragment shader, and then compare the two values.\n      </p>\n      <p>\n        If we were to use the standard approach of recording the depth values in\n        the shadow map, then in the final scene fragment shader we would need to\n        determine which of the light view matrices would be the correct one to\n        use for the current fragment and calculate the current depth\n        accordingly.\n      </p>\n      <p>\n        Since this is a lot more complex then just calculating the distance\n        between the light source and each fragment of the scene and storing and\n        comparing those values, this alternative approach is used instead.\n      </p>\n      <p>\n        We calculate the firection of the vertex from the light source in line\n        47, by just subtracting the position of the light source from the\n        position of the current fragment. This value is then provided to the{\" \"}\n        <code>getAverageVisibility</code> function.\n      </p>\n      <p>\n        The depth of the current fragment is calculated on line 19 by taking the\n        distance of the current fragment from the light source and dividing that\n        result by the far plane of the light's \"camera\" (same as in the fragment\n        shader for the shadow cube map).\n      </p>\n      <p>\n        And then the rest of the calculation for the visibility of the fragment\n        is the same as before. One difference is that since we are now sampling\n        a cube map, we need three nested loops (one for each axis) for sampling\n        the surrounding depth values for our PCF algorithm.\n      </p>\n      <Heading type=\"h2\">Additional Notes</Heading>\n      <Heading type=\"h3\">\n        Generating point light shadow maps in OpenGL/WebGL\n      </Heading>\n      <p>\n        When we generate a camera for each face of the shadow cube map, we use\n        an up vector that points in the positive Y-axis (with the exception for\n        the Y-axis faces, where we use a negative Z-axis up vector for the\n        positive Y face, and a positive Z-axis up vector for the negative Z\n        face).\n      </p>\n      <p>\n        However, in OpenGL/WebGL you need to invert these up vectors instead.\n      </p>\n      <p>\n        In the <Link to=\"/intermediates/color-mapping/\">color mapping</Link>{\" \"}\n        chapter, we provided an additional note that these graphics APIs read\n        image data with the origin at the bottom-left of the image instead of\n        the origin being traditionally at the top-left of the image. As a\n        result, you would need to either flip the UV coordinates on the Y-axis,\n        or flip the image vertically for the results to appear same as other\n        graphics APIs.\n      </p>\n      <p>\n        The reason for this is that while OpenGL/WebGL typically use a\n        right-handed coordinate system (where the positive Z-direction is\n        towards the camera), cube maps instead use the left-handed coordinate\n        system (where the positive Z-direction is away from the camera).\n      </p>\n      <p>\n        As a result, when you transform the cube map faces from one coordinate\n        system to the other, you will find that the up vectors of each face get\n        flipped to the opposite direction.\n      </p>\n      <p>\n        So keeping this in mind is important when working with cube maps and\n        knowing how they behave differently compared to standard 2D maps.\n      </p>\n      <p>\n        This will be discussed in the{\" \"}\n        <Link to=\"/advanced/cube-maps/\">next chapter</Link> as well under the\n        \"Additional Notes\" section.\n      </p>\n      <Heading type=\"h3\">Cascaded shadow maps</Heading>\n      <p>\n        One problem we didn't tackle is shadows of lights covering a large area\n        having lower detail.\n      </p>\n      <p>\n        If a light source is covering a large area, that means that the area has\n        to be compressed more to fit into the shadow map, this means as the\n        areas get bigger, the amount of resolution they get in the shadow map\n        gets reduced, resulting in more aliased reflections.\n      </p>\n      <p>\n        This issue primarily occurs with directional lights due to the fact they\n        have to cover the entire scene, which can be a very large area.\n      </p>\n      <p>\n        With other lights, they can only cover a smaller area due to them being\n        of finite distance and their light intensity reducing with increase in\n        distance as well. As a result, the shadows they cast would be relatively\n        close to the light source itself, so no perspective aliasing issues\n        should occur.\n      </p>\n      <p>\n        However, with infinite light sources like directional lights, they have\n        to light up the entire scene. If the scene is very large, this can cause\n        degraded looking shadows near the camera position.\n      </p>\n      <p>\n        The most common technique used to solve this problem is using Cascaded\n        Shadow Maps (CSM).\n      </p>\n      <p>\n        This technique requires rendering multiple shadow maps, at various\n        distances from the camera of the viewer. Based upon how far an object is\n        from the camera, the appropriate shadow map is selected and used for\n        generating the shadows.\n      </p>\n      <p>\n        This allows us to have one shadow map dedicated to covering a small area\n        close to the viewer, spreading that area across the shadow map as much\n        as possible.\n      </p>\n      <p>\n        The next shadow map will cover an area more further away from the viewer\n        and covers a much larger area. Since this area is further away, the\n        shadow doesn't need to be as high in quality, so fitting in a larger\n        area is fine.\n      </p>\n      <p>\n        This stacking of shadow maps to cover further and further distances can\n        be done according to the amount of quality needed for each distance.\n      </p>\n      <p>\n        Typically 3 to 4 shadow maps are used to cover an entire scene, with the\n        last shadow map covering the rest of the scene area not covered by the\n        previous ones. Since it is the last one, it should be reasonably far\n        away such that the low quality shadows from it should not be noticeable.\n      </p>\n      <Heading type=\"h3\">Other types of lights</Heading>\n      <p>\n        The lights discussed in these chapters are generally the most commonly\n        used ones. There may be some other types of lights, which also have\n        different ways for generating shadows, but they should all use the same\n        or similar principles discussed we've discussed here.\n      </p>\n      <Heading type=\"h3\">Improving render performance</Heading>\n      <p>\n        There are ways to improve performance when rendering shadows. Objects in\n        a scene can be tagged to be \"Shadow Receivers\" or \"Shadow Casters\"\n        against each light source. Shadow receivers have the ability to be in\n        shadow by another object, while shadow casters have the ability to cast\n        shadows onto other objects from a specific light source. All shadow\n        receivers are also considered to be shadow casters.\n      </p>\n      <p>\n        When rendering the shadow map for a light source, you only need to\n        render those objects that have been tagged as a shadow caster or shadow\n        receiver for that light. When rendering the final scene, the shadow map\n        only needs to be passed to those objects that are marked as shadow\n        receivers.\n      </p>\n      <p>\n        This helps to improve performance by reducing the number of objects\n        being rendered into a shadow map, and having objects that won't be\n        receiving shadows skip the shadow calculation parts.\n      </p>\n      <p>\n        Other ways to improve performance is to also use lower detailed objects\n        in the scene for rendering the shadow maps, if they are good enough to\n        use as an approximation for the fully detailed object.\n      </p>\n      <Heading type=\"h3\">Calculating projection matrices for lights</Heading>\n      <p>\n        The projection matrices used for the cameras of the lights were\n        hand-crafted, but this isn't always practically. Sometimes (especially\n        for directional lights) it is more practical to dynamically calculate\n        what the projection matrix should be based on the position of objects in\n        the scene.\n      </p>\n      <p>\n        This can be done by calculating a bounding box that encompasses all the\n        objects that need to be rendered into the shadow map, and then calculate\n        a projection matrix using that bounding box.\n      </p>\n      <p>\n        This allows to more effectively use the space in a shadow map,\n        maximizing the resolution in the shadow map for each area in the scene.\n      </p>\n      <p>\n        There may be cases of popping occuring, where the shadows resolution may\n        suddenly improve or degrade, as objects move in and out of the shadow\n        map bounding box. This can be somewhat countered by smoothing out the\n        change in shadow quality.\n      </p>\n      <p>\n        If you use cascaded shadow maps, this approach won't provide any\n        benefits, but it is still a useful alternative to cascaded shadow maps\n        and is also simpler to implement.\n      </p>\n      <Heading type=\"h2\">Summary</Heading>\n      <ul>\n        <li>\n          Rendering shadows are an important aspect of lighting to make a scene\n          appear complete.\n        </li>\n        <li>\n          Shadows are rendered with the help of shadow maps.\n          <ul>\n            <li>\n              A shadow map is the scene rendered from the perspective of the\n              light source.\n            </li>\n            <li>\n              The shadow map captures the depth of all fragments that are\n              visible to the light source.\n            </li>\n          </ul>\n        </li>\n        <li>\n          When rendering the final scene, calculate the position of where the\n          fragment would be if it were to be rendered in the shadow map, and get\n          the depth value of the closest fragment from that map.\n          <ul>\n            <li>\n              If the current fragment's depth is higher than the closest\n              fragment, it isn't visible to the light source and is in shadow.\n            </li>\n            <li>\n              If the current fragment's depth is lower than or equal to the\n              closest fragment, it is visible to the light source and should be\n              lit instead.\n            </li>\n          </ul>\n        </li>\n        <li>\n          There are certain artifacts that can occur when rendering shadows\n          using shadow maps:\n          <ul>\n            <li>\n              <strong>Shadow acne</strong> - If the precision of the data being\n              stored in the shadow map is higher than what the shadow map can\n              support, the loss in precision can result in some fragments\n              appearing to be in shadow when they aren't. The possible\n              approaches for solving this are:\n              <ul>\n                <li>\n                  Storing the data into the shadow map in such a way that no\n                  precision is lost, such as increasing the effective range that\n                  the depth values will be stored as, or transforming the data\n                  into a data type that the shadow map can support in a lossless\n                  fashion.\n                </li>\n                <li>\n                  Alternatively, a bias value can be introduced where as long as\n                  the difference of depth is less than this value then it can\n                  still be considered to be visible to the light source.\n                </li>\n                <li>\n                  Since the acne is rendered on surfaces that are rendered in\n                  the shadow map, if the back faces of the scene are rendered\n                  when rendering the shadow map, then the acne will only occur\n                  in the areas of the scene in shadow, which will not be\n                  visible.\n                </li>\n              </ul>\n            </li>\n            <li>\n              <strong>Peter-panning</strong> - Some of the solutions to shadow\n              acne can result in shadows appearing to hover from where they\n              should be. This primarily occurs in areas where two objects are\n              touching or are very close to each other.\n              <ul>\n                <li>\n                  The solution to this problem is to make geometry thicker so\n                  that the solution of using a bias value or rendering the back\n                  faces of a scene in a shadow map doesn't cause peter-panning.\n                </li>\n              </ul>\n            </li>\n            <li>\n              <strong>Shadow aliasing</strong> - Due to the limited resolution\n              of a shadow map, shadows can have sharp jagged edges due to\n              aliasing.\n              <ul>\n                <li>\n                  The resolution of shadow maps can be increased to reducing the\n                  size of the aliasing, but this will increase the rendering\n                  time of the shadow map.\n                </li>\n                <li>\n                  Alternatively, the shadow can be filtered using Percentage\n                  Closer Filtering (PCF) algorithms to get multiple samples of\n                  the shadow map and calculate the average intensity of the\n                  fragment being in shadow/light, resulting in softer edges on\n                  shadows.\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n        <li>\n          There are various kinds of lights, all of which generate different\n          kinds of shadows:\n          <ul>\n            <li>\n              <strong>Directional lights</strong> - Light sources that are very\n              far away and their light travels in the same direction and don't\n              reduce in intensity w.r.t. the distance from the light source.{\" \"}\n              <em>Ex: the Sun</em>.\n            </li>\n            <li>\n              <strong>Spot Lights</strong> - Light sources that are a finite\n              distance away, where the light travels in a cone like way towards\n              a single direction from the light source, and the intensity does\n              reduce with distance. <em>Ex: Torches</em>.\n            </li>\n            <li>\n              <strong>Area Lights</strong> - Similar to directional lights,\n              except that they are a finite distance away and their intensity\n              does drop with distance. <em>Ex: Office florescent lights</em>.\n            </li>\n            <li>\n              <strong>Point Lights</strong> - Similar to spot lights, but their\n              light travels in all directions, not just one approximate\n              direction. <em>Ex: Traditional light bulb</em>.\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </Content>\n    <PageChange previous=\"/advanced/transparency/\" />\n  </Layout>\n);\n\nexport default ShadowMappingPage;\n"],"names":["areaLightMapVertexShaderSource","areaLightMapFragmentShaderSource","modelVertices","modelNormals","modelIndices","shaderProgramInfo","vertex","attributeLocations","vertexPosition","uniformLocations","modelMatrix","viewMatrix","projectionMatrix","fragment","lightDirectionInverted","vec4","lightModelPosition","sceneModelPosition","mat4","wrapExample","ShadowMappingAreaLightMapExample","scene","vertices","indices","webGlRef","updateWebGlRef","useState","shaderProgram","updateShaderProgram","shaderInfo","updateShaderInfo","sceneBuffer","updateSceneBuffer","shouldRender","updateShouldRender","canvasRef","useRef","useEffect","current","newWebGlRef","WebGlWrapper","destroy","runOnPredicate","createShaderProgram","getDataLocations","createStaticDrawArrayBuffer","flat","createElementArrayBuffer","renderScene","renderSceneOrtho","_ref","gl","aspect","zNear","zFar","canvasDimensions","depthProjectionMatrix","clearColor","clearDepth","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","lightViewMatrix","scaledModelMatrix","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","FLOAT","enableVertexAttribArray","ELEMENT_ARRAY_BUFFER","useProgram","uniformMatrix4fv","drawElements","TRIANGLES","length","UNSIGNED_SHORT","requestAnimationFrame","React","className","style","padding","width","height","ref","coordArrToString","trim","map","coord","areaLightShadowFragmentShaderSource","shadowMapShaderProgramInfo","vertexNormal","lightModelMatrix","lightProjectionMatrix","lightDirection_worldSpace","lightPosition_worldSpace","lightColor","lightIntensity","texelSize","ambientFactor","shadowMapTextureSampler","lightDirection","vec3","ShadowMappingAreaLightShadowExample","normals","shadowMapShaderProgram","updateShadowMapShaderProgram","shadowMapShaderInfo","updateShadowMapShaderInfo","shadowMapSceneBuffer","updateShadowMapSceneBuffer","shadowMapTexture","shadowMapFramebuffer","updateShadowMapFramebuffer","createRenderTargetTexture","createTextureTargetFramebuffer","vec2","renderToFramebuffer","_ref2","_","uniform4fv","uniform3fv","uniform1f","uniform2fv","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","uniform1i","x","y","z","directionalLightMapVertexShaderSource","vertexShader","directionalLightMapFragmentShaderSource","ShadowMappingDirectionalLightMapExample","directionalLightMapFixedVertexShaderSource","directionalLightMapFixedFragmentShaderSource","ShadowMappingDirectionalLightMapFixedExample","enable","CULL_FACE","cullFace","FRONT","_setupCullFace","directionalLightShadowFixedVertexShaderSource","directionalLightShadowFixedFragmentShaderSource","ShadowMappingFixedDirectionalLightPeterPanningExample","directionalLightShadowVertexShaderSource","directionalLightShadowFragmentShaderSource","ShadowMappingDirectionalLightShadowAcneExample","ShadowMappingDirectionalLightShadowExample","directionalLightShadowFixedAltVertexShaderSource","directionalLightShadowFixedAltFragmentShaderSource","ShadowMappingFixedAltDirectionalLightShadowExample","ShadowMappingFixedDirectionalLightShadowExample","ShadowMappingFixedModelDirectionalLightShadowExample","ShadowMappingFixedModelDirectionalLightZoomedShadowExample","directionalLightShadowPcfVertexShaderSource","directionalLightShadowPcfFragmentShaderSource","ShadowMappingDirectionalLightPcfShadowExample","ShadowMappingDirectionalLightPcfZoomedShadowExample","ShadowMappingNoShadowExample","pointLightMapVertexShaderSource","pointLightMapFragmentShaderSource","farPlane","lightModelFaces","name","id","center","up","ShadowMappingPointLightMapExample","nearPlane","currentFace","updateCurrentFace","renderFace","Math","PI","value","onChange","target","onBlur","_ref3","face","i","key","pointLightShadowFragmentShaderSource","ShadowMappingPointLightShadowExample","createCubeMapRenderTargetTexture","createCubeMapTargetFramebuffer","filter","framebuffer","forEach","renderToCubeMapFramebuffer","TEXTURE_CUBE_MAP","spotLightMapVertexShaderSource","spotLightMapFragmentShaderSource","ShadowMappingSpotLightMapExample","fov","spotLightShadowVertexShaderSource","spotLightShadowFragmentShaderSource","ShadowMappingSpotLightShadowExample","location","pathname","Layout","Seo","title","description","keywords","Content","Link","to","Heading","type","GlslCodeHighlight","code","Equation","text","rel","href","PageChange","previous"],"sourceRoot":""}